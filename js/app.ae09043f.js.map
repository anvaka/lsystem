{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/NoWebGL.vue?301f","webpack:///./src/App.vue","webpack:///./src/LineCollection.js","webpack:///./src/Turtle.js","webpack:///./src/LSystem.js","webpack:///./src/createScene.js","webpack:///./src/grammar/parser.js","webpack:///./src/getCodeModel.js","webpack:///./src/CodeEditor.vue","webpack:///./src/bus.js","webpack:///src/CodeEditor.vue","webpack:///./src/CodeEditor.vue?3cc2","webpack:///./src/CodeEditor.vue?7f42","webpack:///src/App.vue","webpack:///./src/App.vue?1160","webpack:///./src/App.vue?bff9","webpack:///./src/NoWebGL.vue","webpack:///./src/NoWebGL.vue?ff1f","webpack:///./src/main.js","webpack:///./src/App.vue?b861","webpack:///./src/lmode.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","render","_vm","this","_c","_self","attrs","staticClass","on","$event","preventDefault","toggleEdit","arguments","_v","_s","showEdit","randomize","class","syntaxHelpVisible","_m","_e","codeEditorModel","toSVGFile","staticRenderFns","LineCollection","GLCollection","constructor","gl","options","program","defineProgram","vertex","fragment","attributes","color","ColorAttribute","instanced","point","InstancedAttribute","super","width","multiColorSegment","draw","_","drawContext","uniforms","modelViewProjection","resolution","height","forEachLine","cb","count","getCount","from","x","y","z","to","getLineColor","Turtle","scene","position","checkArray","direction","normalize","lines","getGL","capacity","appendChild","stack","invertZYAngle","pop","state","dispose","removeChild","move","distance","add","renderFrame","setColor","newColorValue","undefined","Error","rgba","tinycolor","values","names","toRgb","g","b","a","rotateZ","angleInDegrees","rad","Math","PI","cos","sin","rotateY","rotateX","swapAngle","arrayName","array","Array","isArray","arr","hypot","LIMIT","LSystem","systemSettings","coerceTypes","rules","actions","compileActions","turtle","stepsPerFrame","drawQueue","lastDrawnIndex","depth","Number","isFinite","start","keys","simulate","iterator","renderIterator","frame","next","steps","done","production","index","iterateRules","complete","rule","op","rewriteRule","join","lSystem","defaultRotationAngle","angle","mergedActions","args","forEach","turtleAction","turtleCanDo","command","indexOf","getLength","match","system","parseFloat","createLScene","canvas","createScene","guide","createGuide","lineColor","setClearColor","initialSceneSize","setViewBox","left","top","right","bottom","disposeLater","canDrawMore","raf","requestAnimationFrame","setSystem","saveToSVG","isComplete","fileName","svg","toSVG","open","blob","Blob","type","url","URL","createObjectURL","setTimeout","document","createElement","href","download","click","revokeLater","revokeObjectURL","newSystem","cancelAnimationFrame","wantGuideToBeHidden","hideGrid","every","drawSystem","separator","ws","numericKey","vectorKey","parens","ExpectRewriteValue","addTo","parent","valueParser","process","line","split","trim","v","replace","extractAction","stringValue","map","extractStringValue","matchedString","ExpectKeyValue","parseVector","vectorName","component","parse","str","currentState","lineNumber","startsWith","e","message","queryState","require","qs","code","getInitialCode","useSearch","standardCollection","getCodeModel","model","setCode","error","lastPickedIndex","pickRandomIndex","ignoreNextUpdate","newCode","parseExpression","axiom","set","floor","random","ref","viewportMargin","Infinity","theme","callback","$$v","$set","expression","bus","eventify","CodeMirror","toggleComment","cm","indent","lineComment","handleUp","handleDown","updateValueIfNeededBy","delta","ch","doc","props","components","codemirror","mounted","beforeDestroy","watch","clearTimeout","clearImmediate","isImmediate","methods","setImmediateUpdate","refreshEditor","isCollapsed","CodeEditor","script","Vue","config","productionTip","canRender","isWebGLEnabled","querySelector","h","App","NoWebGL","$mount","defineMode","parserConfig","indentUnit","statementIndent","jsonMode","json","isTS","lsystem","typescript","wordRE","wordCharacters","ruleCharRE","keywords","kw","style","nope","test","content","isOperatorChar","readRegexp","stream","escaped","inSet","ret","tp","cont","tokenBase","tokenize","tokenString","eat","tokenComment","skipToEnd","expressionAllowed","current","tokenQuasi","peek","eatWhile","lexical","word","lastType","propertyIsEnumerable","arrow","string","quote","maybeEnd","brackets","findFatArrow","fatArrowAt","exec","sawSomething","pos","charAt","bracket","atomicTypes","JSLexical","indented","column","align","prev","info","inScope","varname","localVars","cx","context","vars","parseJS","cc","marked","combinator","statement","lex","pass","inList","list","register","block","newContext","registerVarScoped","Var","globalVars","inner","Context","isModifier","defaultVars","pushcontext","pushblockcontext","popcontext","pushlex","outer","poplex","expect","wanted","exp","vardef","parenExpr","maybeexpression","maybeelse","functiondef","forspec","className","enumdef","typename","typeexpr","pattern","maybelabel","maybeCatchBinding","afterExport","afterImport","funarg","expressionInner","expressionNoComma","noComma","body","arrowBodyNoComma","arrowBody","commasep","maybeop","maybeoperatorNoComma","maybeoperatorComma","classExpression","arrayLiteral","contCommasep","objprop","quasi","maybeTarget","me","expr","backUp","continueQuasi","targetNoComma","target","maybeTypeArgs","getterSetter","afterprop","maybetype","what","end","sep","proceed","maybetypeOrIn","mayberettype","isKW","afterType","typeprop","typearg","maybeReturnType","functiondecl","typeparam","maybeTypeDefault","maybeAssign","vardefCont","eltpattern","proppattern","_type","forspec1","forspec2","classNameAfter","classBody","classfield","isInterface","maybeFrom","exportField","importSpec","maybeMoreImports","maybeAs","enummember","isContinuedStatement","textAfter","startState","basecolumn","token","sol","indentation","eatSpace","Pass","firstChar","closing","doubleIndentSwitch","electricInput","blockCommentStart","blockCommentEnd","blockCommentContinue","fold","closeBrackets","helperType","jsonldMode","skipExpression","registerHelper","defineMIME","jsonld"],"mappings":"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","file":"js/app.ae09043f.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./NoWebGL.vue?vue&type=style&index=0&id=283309e6&prod&lang=stylus&scoped=true&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"app\"}},[_c('div',{staticClass:\"sidebar\"},[_c('div',{staticClass:\"controls\"},[_c('a',{staticClass:\"print-button\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.toggleEdit.apply(null, arguments)}}},[_vm._v(_vm._s(_vm.showEdit ? \"Hide editor\" : \"Edit...\"))]),_c('a',{staticClass:\"try-another\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.randomize.apply(null, arguments)}}},[_vm._v(\"Randomize\")])]),(_vm.showEdit)?_c('div',{staticClass:\"editor-container\"},[_c('div',{staticClass:\"section\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"L-System details: \"),_c('a',{staticClass:\"reset-all\",class:{\"syntax-visible\": _vm.syntaxHelpVisible},attrs:{\"href\":\"#\",\"title\":\"click to learn more about syntax\"},on:{\"click\":function($event){$event.preventDefault();_vm.syntaxHelpVisible = !_vm.syntaxHelpVisible}}},[_vm._v(\"syntax help\")])]),(_vm.syntaxHelpVisible)?_c('div',{staticClass:\"help\"},[_vm._v(\" L-Systems are described very well on \"),_c('a',{attrs:{\"href\":\"http://paulbourke.net/fractals/lsys/\",\"target\":\"_blank\"}},[_vm._v(\"Paul Bourke's website\")]),_vm._v(\". \"),_vm._m(0)]):_vm._e(),(_vm.codeEditorModel)?_c('code-editor',{staticClass:\"code-editor-container\",attrs:{\"model\":_vm.codeEditorModel}}):_vm._e()],1),_c('div',{staticClass:\"section border-top\"},[_vm._m(1),_c('p',[_vm._v(\"You can \"),_c('a',{attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.toSVGFile.apply(null, arguments)}}},[_vm._v(\"export to svg\")]),_vm._v(\" current scene\")]),_vm._m(2)])]):_vm._e()])])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('p',[_vm._v(\"The following is the list of available sections: \"),_c('ul',[_c('li',[_c('strong',[_vm._v(\"axiom\")]),_vm._v(\": initial state of the system\")]),_c('li',[_c('strong',[_vm._v(\"rules\")]),_vm._v(\": list of rewrite rules that are applied on each iteration\")]),_c('li',[_c('strong',[_vm._v(\"depth\")]),_vm._v(\": how deep we are allowed to go recursively\")]),_c('li',[_c('strong',[_vm._v(\"angle\")]),_vm._v(\": if specified, this argument governs rotation angle. Can be overridden with \"),_c('strong',[_vm._v(\"actions\")])]),_c('li',[_c('strong',[_vm._v(\"actions\")]),_vm._v(\": list of graphic commands that are triggered by a matching character in the evolved system. The following is the list of available actions: \"),_c('ul',[_c('li',[_c('strong',[_vm._v(\"draw(x)\")]),_vm._v(\" draw \"),_c('code',[_vm._v(\"x\")]),_vm._v(\" units in current direction\")]),_c('li',[_c('strong',[_vm._v(\"move(x)\")]),_vm._v(\" move \"),_c('code',[_vm._v(\"x\")]),_vm._v(\" units in current direction without drawing\")]),_c('li',[_c('strong',[_vm._v(\"rotate(deg)\")]),_vm._v(\" rotate current direction \"),_c('code',[_vm._v(\"deg\")]),_vm._v(\" degrees around Z axis\")]),_c('li',[_c('strong',[_vm._v(\"rotateX(deg)\")]),_vm._v(\" rotate current direction \"),_c('code',[_vm._v(\"deg\")]),_vm._v(\" degrees around X axis\")]),_c('li',[_c('strong',[_vm._v(\"rotateY(deg)\")]),_vm._v(\" rotate current direction \"),_c('code',[_vm._v(\"deg\")]),_vm._v(\" degrees around Y axis\")]),_c('li',[_c('strong',[_vm._v(\"push()\")]),_vm._v(\" saves current render state onto stack\")]),_c('li',[_c('strong',[_vm._v(\"pop()\")]),_vm._v(\" restores previously saved render state\")]),_c('li',[_c('strong',[_vm._v(\"setColor(color)\")]),_vm._v(\" set the current color value, '#ffa500' or 'orange'.\")]),_c('li',[_c('strong',[_vm._v(\"swapAngle()\")]),_vm._v(\" swaps the meaning of `+` and `-`.\")])]),_c('p',[_vm._v(\"By default the following actions are added automatically:\")]),_c('pre',[_c('code',[_vm._v(\"actions:\\n  F => draw(10)\\n  f => move(10)\\n  + => rotate(60)\\n  - => rotate(-60)\\n  & => swapAngle()\\n  [ => push()\\n  ] => pop()\\n\")])])]),_c('li',[_c('strong',[_vm._v(\"width\")]),_vm._v(\": width in pixels of the drawn line\")]),_c('li',[_c('strong',[_vm._v(\"color\")]),_vm._v(\": color of the line. Accepts names and hex. E.g. \"),_c('code',[_vm._v(\"blue\")]),_vm._v(\", works the same as \"),_c('code',[_vm._v(\"#0000ff\")])]),_c('li',[_c('strong',[_vm._v(\"stepsPerFrame\")]),_vm._v(\": how many steps we are allowed to render per single frame. If set to \"),_c('code',[_vm._v(\"-1\")]),_vm._v(\" the scene is rendered immediately. This could be dangerous on deep systems, as the entire system traversal may exhaust the browser's resources. \")]),_c('li',[_c('strong',[_vm._v(\"direction\")]),_vm._v(\": three numbers separated by coma \"),_c('code',[_vm._v(\"x, y, z\")]),_vm._v(\" that set initial direction\")]),_c('li',[_c('strong',[_vm._v(\"position\")]),_vm._v(\": three numbers separated by coma \"),_c('code',[_vm._v(\"x, y, z\")]),_vm._v(\" that set initial position\")])])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('p',[_vm._v(\"This website renders any L-Systems defined above. The website was created by \"),_c('a',{attrs:{\"href\":\"https://twitter.com/anvaka\"}},[_vm._v(\"@anvaka\")]),_vm._v(\".\")])\n},function (){var _vm=this,_c=_vm._self._c;return _c('p',[_vm._v(\"You can find the entire source code \"),_c('a',{attrs:{\"href\":\"https://github.com/anvaka/lsystem\"}},[_vm._v(\"here\")]),_vm._v(\". Finally, under condition that you love this website you can \"),_c('a',{attrs:{\"href\":\"https://www.paypal.com/paypalme2/anvakos/3\"}},[_vm._v(\"buy me a coffee\")]),_vm._v(\" :) \")])\n}]\n\nexport { render, staticRenderFns }","import {GLCollection, defineProgram, InstancedAttribute, ColorAttribute} from 'w-gl';\n\nexport default class LineCollection extends GLCollection {\n  constructor(gl, options = {}) {\n    let program = defineProgram({\n      gl,\n      vertex: `\n    uniform mat4 modelViewProjection;\n    uniform float width;\n    uniform vec2 resolution;\n\n    attribute vec4 color;\n    attribute vec3 from, to;\n    attribute vec2 point;\n\n    varying vec4 vColor;\n    varying vec2 vPoint;\n\n    void main() {\n      vec4 clip0 = modelViewProjection * vec4(from, 1.0);\n      vec4 clip1 = modelViewProjection * vec4(to, 1.0);\n\n      vec2 screen0 = resolution * (0.5 * clip0.xy/clip0.w + 0.5);\n      vec2 screen1 = resolution * (0.5 * clip1.xy/clip1.w + 0.5);\n\n      vec2 xBasis = normalize(screen1 - screen0);\n      vec2 yBasis = vec2(-xBasis.y, xBasis.x);\n\n      // Offset the original points:\n      vec2 pt0 = screen0 + width * point.x * yBasis;\n      vec2 pt1 = screen1 + width * point.x * yBasis;\n\n      vec2 pt = mix(pt0, pt1, point.y);\n      vec4 clip = mix(clip0, clip1, point.y);\n\n      gl_Position = vec4(clip.w * (2.0 * pt/resolution - 1.0), clip.z, clip.w);\n      vColor = color.abgr; // mix(.abgr, aToColor.abgr, aPosition.y);\n    }`,\n\n      fragment: `\n    precision highp float;\n    varying vec4 vColor;\n\n    void main() {\n      gl_FragColor = vColor;\n    }`,\n      attributes: {\n        color: new ColorAttribute()\n      },\n      instanced: {\n        point: new InstancedAttribute([\n          -0.5, 0, -0.5, 1, 0.5, 1, // First 2D triangle of the quad\n          -0.5, 0, 0.5, 1, 0.5, 0   // Second 2D triangle of the quad\n        ])\n      }\n    });\n    super(program);\n    this.width = options.width || 2;\n    this.multiColorSegment = true;\n  }\n\n  draw(_, drawContext) {\n    if (!this.uniforms) {\n      this.uniforms = {\n        modelViewProjection: this.modelViewProjection,\n        width: this.width,\n        resolution: [drawContext.width, drawContext.height]\n      }\n    }\n    this.uniforms.resolution[0] = drawContext.width;\n    this.uniforms.resolution[1] = drawContext.height;\n    this.program.draw(this.uniforms);\n  }\n\n  // implement lineRenderTrait to allow SVG export via w-gl\n  forEachLine(cb) {\n    let count = this.program.getCount()\n    for (let i = 0; i < count; ++i) {\n      let vertex = this.program.get(i);\n      let from = { x: vertex.from[0], y: vertex.from[1], z: vertex.from[2], color: vertex.color }\n      let to = { x: vertex.to[0], y: vertex.to[1], z: vertex.to[2], color: vertex.color }\n      cb(from, to);\n    }\n  }\n\n  getLineColor(from) {\n    let count = this.program.getCount()\n    let c = from ? \n              from.color :  \n              count > 0 ? this.program.get(0).color : 0xFFFFFFFF;\n\n    return [\n      ((c >> 24) & 0xFF) / 255,\n      ((c >> 16) & 0xFF) / 255,\n      ((c >>  8) & 0xFF) / 255,\n      ((c >>  0) & 0xFF) / 255,\n    ]\n  }\n}","import LineCollection from './LineCollection';\nimport tinycolor from 'tinycolor2';\n\nexport default class Turtle {\n  constructor(scene, options = {}) {\n    this.position = options.position || [0, 0, 0];\n    checkArray('position', this.position);\n    this.direction = options.direction || [1, 0, 0];\n    normalize(this.direction);\n    checkArray('direction', this.direction);\n\n    this.lines = new LineCollection(scene.getGL(), { capacity: 1024, width: options.width || 2 });\n    this.scene = scene;\n    this.color = options.color || 0xFFFFFFFF;\n\n    this.scene.appendChild(this.lines);\n    this.stack = [];\n    this.invertZYAngle = false;\n  }\n\n  push() {\n    this.stack.push({\n      color: this.color,\n      direction: [this.direction[0], this.direction[1], this.direction[2]],\n      position: [this.position[0], this.position[1], this.position[2]],\n    })\n  }\n\n  pop() {\n    let state = this.stack.pop();\n    this.color = state.color;\n    this.direction = state.direction;\n    this.position = state.position;\n  }\n\n  dispose() {\n    this.scene.removeChild(this.lines);\n  }\n\n  move(distance) {\n    let p = this.position;\n    let n = this.direction;\n    let x = p[0] + distance * n[0];\n    let y = p[1] + distance * n[1];\n    let z = p[2] + distance * n[2];\n    p[0] = x; p[1] = y; p[2] = z;\n  }\n\n  draw(distance) {\n    let p = this.position;\n    let n = this.direction;\n    let x = p[0] + distance * n[0];\n    let y = p[1] + distance * n[1];\n    let z = p[2] + distance * n[2];\n    this.lines.add({\n      from: p, \n      to: [x, y, z],\n      color: this.color\n    });\n\n    p[0] = x; p[1] = y; p[2] = z;\n    this.scene.renderFrame();\n  }\n\n  setColor(newColorValue) {\n    if (newColorValue === undefined) {\n      throw new Error('setColor() expects color value, got undefined');\n    }\n    const rgba = tinycolor(typeof newColorValue === 'number' ? \n      Object.values(tinycolor.names)[newColorValue] : newColorValue\n    ).toRgb();\n    this.color = (rgba.r << 24) | (rgba.g << 16) | (rgba.b << 8) | (rgba.a * 255 | 0)\n  }\n\n  rotateZ(angleInDegrees) {\n    if (this.invertZYAngle) angleInDegrees *= -1;\n    let rad = Math.PI * angleInDegrees / 180;\n    let n = this.direction;\n\n    let x = Math.cos(rad) * n[0] - Math.sin(rad) * n[1];\n    let y = Math.sin(rad) * n[0] + Math.cos(rad) * n[1];\n\n    n[0] = x;\n    n[1] = y;\n  }\n\n  rotateY(angleInDegrees) {\n    if (this.invertZYAngle) angleInDegrees *= -1;\n    let rad = Math.PI * angleInDegrees / 180;\n    let n = this.direction;\n\n    let x = Math.cos(rad) * n[0] - Math.sin(rad) * n[2];\n    let z = Math.sin(rad) * n[0] + Math.cos(rad) * n[2];\n\n    n[0] = x;\n    n[2] = z;\n  }\n\n  rotateX(angleInDegrees) {\n    let rad = Math.PI * angleInDegrees / 180;\n    let n = this.direction;\n\n    let y = Math.cos(rad) * n[1] - Math.sin(rad) * n[2];\n    let z = Math.sin(rad) * n[1] + Math.cos(rad) * n[2];\n\n    n[1] = y;\n    n[2]= z;\n  }\n\n  swapAngle() {\n    this.invertZYAngle = !this.invertZYAngle;\n  }\n}\n\nfunction checkArray(arrayName, array, ) {\n  if (!Array.isArray(array)) {\n    throw new Error('Array is expected for `' + arrayName + '`');\n  }\n  if (array.length === 2) {\n    array.push(0);\n  }\n  if (array.length !== 3) {\n    throw new Error('Array `' + arrayName + '` should have 2 or 3 coordinates, got ' + array.length);\n  }\n}\nfunction normalize(arr) {\n  let l = Math.hypot(arr[0], arr[1], arr[2]);\n  arr[0] /= l;\n  arr[1] /= l;\n  arr[2] /= l;\n}\n","import Turtle from './Turtle';\nimport tinycolor from 'tinycolor2';\n\n// We don't want to crash the browser. If the expanded system is larger than this\n// we will stop iteration\nconst LIMIT = 1000000;\n\nexport default class LSystem {\n  constructor(scene, systemSettings) {\n    coerceTypes(systemSettings);\n    this.rules = systemSettings.rules;\n    this.actions = compileActions(systemSettings, this);\n    this.turtle = new Turtle(scene, systemSettings);\n    this.stepsPerFrame = systemSettings.stepsPerFrame || 42;\n    this.drawQueue = [];\n    this.lastDrawnIndex = -1;\n\n    const depth = Number.isFinite(systemSettings.depth) ? systemSettings.depth : 5;\n    let start = systemSettings.start;\n    if (start === undefined) start = Object.keys(this.rules)[0];\n    if (start === undefined) throw new Error('System does not have neither rewrite rules nor start state');\n    this.start = start;\n    this.depth = depth;\n    this.simulate(); // TODO: Might exhaust system resources\n    this.iterator = this.renderIterator();\n  }\n\n  dispose() {\n    this.turtle.dispose();\n  }\n\n  frame() {\n    let next, steps = 0;\n    do {\n      next = this.iterator.next();\n    } while (!next.done && steps++ < this.stepsPerFrame );\n    return !next.done;\n  }\n\n  simulate() {\n    let production = this.start;\n    let index = 0;\n    while (index < this.depth && production.length < LIMIT) {\n      production = this.iterateRules(production);\n      index += 1;\n    }\n\n    this.production = production;\n    this.complete = production.length < LIMIT;\n  }\n\n  iterateRules(rule) {\n    let result = [];\n    for (let op of rule) {\n      let rewriteRule = this.rules[op];\n      if (rewriteRule !== undefined) result.push(rewriteRule);\n      else result.push(op);\n    }\n    return result.join('');\n  }\n\n  *renderIterator() {\n    for (let op of this.production) {\n      if (this.actions[op]) {\n        if (this.stepsPerFrame < 0) {\n          yield* this.actions[op]();\n        } else {\n          yield this.actions[op]();\n        }\n      }\n    }\n  }\n}\n\nfunction compileActions(systemSettings, lSystem) {\n  let actions = {};\n\n  let defaultRotationAngle = Number.isFinite(systemSettings.angle) ? systemSettings.angle : 60; \n\n  let mergedActions = {\n    'F': {name: 'draw', args: []},\n    'f': {name: 'move', args: []},\n    '+': {name: 'rotate', args: [defaultRotationAngle]},\n    '-': {name: 'rotate', args: [-defaultRotationAngle]},\n    '&': {name: 'swapAngle', args: [-defaultRotationAngle]},\n    '[': {name: 'push', args: []},\n    ']': {name: 'pop', args: []},\n    ...systemSettings.actions\n  }\n\n  Object.keys(mergedActions).forEach(key => {\n    let value = mergedActions[key];\n    let turtleAction = turtleCanDo(value, lSystem);\n    if (turtleAction) {\n      actions[key] = turtleAction;\n    } else {\n      throw new Error(\"Turtle does not know how to do '\" + value + \"'\");\n    }\n  });\n\n  return actions;\n}\n\nfunction turtleCanDo(command, lSystem) {\n  if (command.name.indexOf('rotate') === 0) {\n    let angle = command.args[0]\n    if (!Number.isFinite(angle)) throw new Error('`rotate() needs one float argument');\n\n    switch (command.name) {\n      case 'rotateX': return function() { lSystem.turtle.rotateX(angle) };\n      case 'rotateY': return function() { lSystem.turtle.rotateY(angle) };\n    }\n\n    return function() { lSystem.turtle.rotateZ(angle) };\n  }\n\n  if (command.name === 'draw') {\n    let length = getLength(command.args[0], 'draw');\n    return function() {\n      lSystem.turtle.draw(length)\n    }\n  }\n\n  if (command.name.match(/chcolor|setColor/i)) {\n    let color = command.args[0];\n    return function() {\n      lSystem.turtle.setColor(color)\n    }\n  }\n\n  if (command.name === 'push') return function() {lSystem.turtle.push()}\n  if (command.name === 'pop') return function() {lSystem.turtle.pop()}\n  if (command.name === 'move') {\n    let length = getLength(command.args[0], 'move');\n    return function() {lSystem.turtle.move(length)}\n  }\n  if (command.name.match(/swapAngle/i)) {\n    return function() {lSystem.turtle.swapAngle()}\n  }\n}\n\n\nfunction getLength(value, name) {\n  let length = 10;\n  if (value !== undefined) {\n    length = value;\n     if (!Number.isFinite(length)) throw new Error(name  +'(l) expects `l` to be a float number. Got: ' + value);\n  }\n  return length;\n}\n\n\nfunction coerceTypes(system) {\n  if (system.angle !== undefined) system.angle = Number.parseFloat(system.angle);\n  if (system.width !== undefined) system.width = Number.parseFloat(system.width);\n  if (system.depth !== undefined) system.depth = Number.parseFloat(system.depth);\n  if (system.color !== undefined) {\n    let rgba = tinycolor(system.color).toRgb();\n    system.color = (rgba.r << 24) | (rgba.g << 16) | (rgba.b << 8) | (rgba.a * 255 | 0)\n  } \n}\n","import {createScene, createGuide, toSVG} from 'w-gl';\nimport LSystem from './LSystem';\n\nexport default function createLScene(canvas) {\n  let scene = createScene(canvas);\n  let guide = createGuide(scene, {\n    lineColor: 0x0d3f71ff\n  });\n\n  scene.setClearColor(12/255, 41/255, 82/255, 1)\n  let initialSceneSize = 40;\n  scene.setViewBox({\n    left:  -initialSceneSize,\n    top:   -initialSceneSize,\n    right:  initialSceneSize,\n    bottom: initialSceneSize,\n  });\n\n  let canDrawMore = false;\n  let lSystem = [];\n  let disposeLater;\n  let raf = requestAnimationFrame(frame);\n\n  return {\n    dispose,\n    setSystem,\n    saveToSVG,\n    isComplete,\n  }\n\n  function saveToSVG(fileName) {\n    let svg = toSVG(scene, {\n      open() {\n        return `<!-- Generator: https://github.com/anvaka/l-system -->`;\n      }\n    });\n    let blob = new Blob([svg], {type: \"image/svg+xml\"});\n    let url = window.URL.createObjectURL(blob);\n    // For some reason, safari doesn't like when download happens on the same\n    // event loop cycle. Pushing it to the next one.\n    setTimeout(() => {\n      let a = document.createElement(\"a\");\n      a.href = url;\n      a.download = fileName;\n      a.click();\n      revokeLater(url);\n    }, 30)\n  }\n\n  function revokeLater(url) {\n    // In iOS immediately revoked URLs cause \"WebKitBlobResource error 1.\" error\n    // Setting a timeout to revoke URL in the future fixes the error:\n    setTimeout(() => {\n      window.URL.revokeObjectURL(url);\n    }, 45000);\n  }\n\n  function setSystem(newSystem) {\n    cancelAnimationFrame(raf);\n    if (disposeLater) {\n      lSystem.forEach(l => disposeLater.push(l));\n    } else {\n      disposeLater = lSystem;\n    }\n\n    if (!Array.isArray(newSystem)) {\n      newSystem = [newSystem]\n    }\n    let wantGuideToBeHidden = false;\n    lSystem = [];\n    newSystem.forEach(systemSettings => {\n      if (systemSettings.hideGrid) {\n        wantGuideToBeHidden = true;\n      }\n      lSystem.push(new LSystem(scene, systemSettings));\n    });\n\n    if (wantGuideToBeHidden && guide) {\n      guide.dispose();\n      guide = null;\n    } else if (!wantGuideToBeHidden && !guide) {\n      guide = createGuide(scene);\n    }\n\n    raf = requestAnimationFrame(frame);\n  }\n\n  function isComplete() {\n    return lSystem.every(x => x.complete);\n  }\n\n  function frame() {\n    canDrawMore = false;\n    lSystem.forEach(drawSystem);\n    if (canDrawMore) {\n      raf = requestAnimationFrame(frame);\n    }\n    if (disposeLater) {\n      disposeLater.forEach(l => l.dispose())\n      disposeLater = null;\n    }\n  }\n\n  function drawSystem(system) {\n    canDrawMore |= system.frame();\n  }\n\n  function dispose() {\n    cancelAnimationFrame(raf);\n    scene.dispose();\n  }\n}","/**\n * This is a very simple parser to parse our \"L-system\" language\n * \n * It works as a simple state machine, which has two rules:\n * \n * \"ExpectKeyValue\" and \"ExpectRewriteValue\". In each state it consumes\n * a line from the input and either transitions to the next state\n * or adds new key/values to the current state.\n */\nconst separator = /:|->|=>|=|/\nconst rules = /rules|production rules/i;\nconst actions = /actions/i;\nconst ws = /[ \\t]/g;\nconst numericKey = /angle|depth|width|stepsPerFrame/i;\nconst vectorKey = /direction|position/i;\nconst parens = /[[\\]()]/;\n\n/**\n * Read rewrite rule.\n */\nclass ExpectRewriteValue {\n  constructor(addTo, parent, valueParser) {\n    this.parent = parent;\n    this.addTo = addTo;\n    this.valueParser = valueParser || (result => result);\n  }\n\n  process(line) {\n    let result = line.split(separator)\n    if (result.length === 1) throw new Error('Expected `_ => value`, found ' + line);\n\n    let key = result[0].trim();\n    if (key.length !== 1) {\n      // we are done with this rule\n      return this.parent.process(line);\n    }\n    let v = result.slice(1).join('').replace(ws, '');\n    this.addTo[key] = this.valueParser(v);\n    return this;\n  }\n}\n\nfunction extractAction(stringValue) {\n  let m = stringValue.match(/(\\w+?)\\s*\\((.+?)?\\)/);\n  if (!m) {\n    throw new Error('Expected `action()` call, got: ' + stringValue);\n  }\n  let name = m[1];\n  let args;\n  if (!m[2]) args = []; \n  else {\n    args = m[2].split(',').map(v => {\n      let stringValue = extractStringValue(v);\n      if (stringValue !== undefined) return stringValue;\n      return Number.parseFloat(v.trim());\n    });\n  }\n  return {name, args};\n}\n\nfunction extractStringValue(value) {\n  let matchedString = (value && value.match(/\\s*(?:'(.*?)'|\"(.*?)\")\\s*/));\n  if (matchedString) {\n    return matchedString[1] || matchedString[2];\n  }\n}\n\n/**\n * Expect arbitrary key/value line.\n */\nclass ExpectKeyValue {\n  constructor(addTo) {\n    this.addTo = addTo;\n  }\n\n  process(line) {\n    let result = line.split(separator)\n    if (result.length === 1) throw new Error('Expected `key: value`, found ' + line);\n    let key = result[0].trim();\n    let value = result.slice(1).join('').trim();\n    if (key.match(rules)) {\n      this.addTo.rules = {};\n      return new ExpectRewriteValue(this.addTo.rules, this);\n    } else if (key.match(actions)) {\n      this.addTo.actions = {};\n      return new ExpectRewriteValue(this.addTo.actions, this, extractAction);\n    } else if (key.match(numericKey)) {\n      let v = Number.parseFloat(value);\n      if (!Number.isFinite(v)) {\n        throw new Error('Expected a number value for `' + key + '`');\n      }\n      this.addTo[key] = v;\n      return this;\n    } else if (key.match(vectorKey)) {\n      this.addTo[key] = parseVector(value, key)\n      return this;\n    }\n\n    this.addTo[key] = value;\n    return this;\n  }\n}\n\nfunction parseVector(v, vectorName) {\n  return v.replace(parens, '').replace(ws, '').split(',').map((component, position) => {\n    if (!component) {\n      throw new Error('Missing vector component at position ' + position +' for `' + vectorName + '`');\n    }\n    let x = Number.parseFloat(component);\n    if (!Number.isFinite(x)) {\n      throw new Error('Vectors are expected to be numbers. Found `' + component + '` in `' + v + '`');\n    }\n    return x;\n  })\n}\n\nexport default function parse(str) {\n  let lines = str.split('\\n');\n  let currentState = new ExpectKeyValue({});\n\n  lines.forEach((line, lineNumber) => {\n    line = line.trim();\n    // ignore comments and empty lines\n    if (line === '' || line.startsWith('//')) return;\n    try {\n      currentState = currentState.process(line);\n    } catch (e) {\n      throw new Error(e.message + '\\n\\n at line ' + lineNumber);\n    }\n  });\n\n  while (currentState.parent) {\n    currentState = currentState.parent;\n  }\n  return currentState.addTo;\n}\n","import parseExpression from './grammar/parser';\nconst queryState = require('query-state');\n\nvar qs = queryState({\n  code: getInitialCode()\n}, {\n  useSearch: true\n});\n\n// Create a Parser object from our grammar.\nlet standardCollection = [\n`// dragon curve\naxiom: X\nrules: \n X => X+YF+\n Y => -FX-Y\n\ndepth: 10\nangle: 90`,\n\n`// William McWorters Terdragon\naxiom: F\nrules: \n F => F+F-F\n\ndepth: 8\nangle: 120`,\n\n`// William McWorters Pentl\naxiom: F-F-F-F-F\nrules: \n  F => cF-F-F++dF+F-F \n\ndepth: 4\nangle: 72\nactions:\n  c => setColor(\"mediumpurple\")\n  d => setColor(\"violet\") `,\n\n`// William McWorters Pentant\naxiom: X-X-X-X-X\nrules: \n  F => \n  X => dFX-FX-FX+FY+FY+FX-FX\n  Y => cFY+FY-FX-FX-FY+FY+FY\n\ndepth: 3\nangle: 72\nactions:\n  c => setColor(\"goldenrod\")\n  d => setColor(\"gold\") `,\n\n`// William McWorter Siernski Carpet \naxiom: F\nrules: \n F => cF+F-F-F-f+dF+F+F-F\n f => fff\n\nangle: 90\ndepth: 4\nactions:\n  c => setColor(\"goldenrod\")\n  d => setColor(\"gold\") `,\n\n`// Hexagonal Gosper\naxiom: X\nrules:\n X => X+YF++YF-FX--FXFX-YF+\n Y => -FX+YFYF++YF+FX--FX-Y \n\nangle: 60`,\n\n`// Peano curve\naxiom: X\nrules: \n X => XFYFX-F-YFXFY+F+XFYFX\n Y => YFXFY+F+XFYFX-F-YFXFY\n\ndepth:4\nangle: 90`,\n\n`// Gary Teachout Pean-c\naxiom: FX\nrules:\n F => \n X =>  FX-FY-FX+FY+FX+FY+FX+FY+FX-FY-FX-FY-FX-FY-FX+FY+FX\n Y => FY\n\ndepth: 3\nangle: 45`,\n\n`// Square Sierpinski\naxiom: F+XF+F+XF\nrules: \n X => XF-F+F-XF+F+XF-F+F-X\n\ndepth: 4\nangle: 90 `,\n\n`// Tree\naxiom: X\nrules: \n F => FF\n X => F-[[X]+X]+F[+FX]-X\n\ndirection: [0, 1, 0]\nangle: 22.5`,\n`// Tree with color\naxiom: X\nrules: \n F => FF\n X => F-[[X]+X]+cF[+dFX]-X\n\ncolor:brown\ndirection: [0, 1, 0]\nangle: 22.5a\nactions:\n  c => setColor('green')\n  d => setColor('lightgreen')`,\n\n`// Bush, after P. Bourke\naxiom: Y\nrules: \n  X => X[-FFF]c[+FFF]FX\n  Y => dYFXe[+Y][-Y]\n\ncolor: brown\ndirection: [0, 1, 0]\nangle: 22.5\nactions:\n  c => setColor('green')\n  d => setColor('lime')\n  e => setColor('brown')`,\n\n` // Grains, after P. Bourke\naxiom: Y\nrules: \n  X => dX[-F+FF]cg[+F-FF]dFX\n  Y => eYFX[+Y][-Y]\n\ndepth:5\ndirection: [0, 1, 0]\nangle: 27\nactions:\n  c => setColor('green')\n  d => setColor('lime')\n  e => setColor('lightgreen')\n  g => rotate(0.3)`,\n\n` // Grains 2, after P. Bourke\naxiom: Y\nrules: \n  X => cX[-FF-F]g[+FF+F]dFX\n  Y => eYFX[+Y][-Y]XFY\n\ndepth:4\ndirection: [0, 1, 0]\nangle: 27\nactions:\n  c => setColor('green')\n  d => setColor('lime')\n  e => setColor('gold')\n  g => rotate(0.2)`,\n\n`// Bush, P. Bourke\naxiom: F\nrules: \n  F => FF+[c+F-F-F]-[-F+F+dF]\n\ncolor: green\ndirection: [0, 1, 0]\nangle: 21\ndepth:4\nactions:\n  c => setColor('green')\n  d => setColor('lime')`,\n\n`// P. Bourkes Pentaplexy\naxiom: F++F++F++F++F\nrules: \n  F => cF++F++F+++++dF-F++F\n\ndepth:3\nangle: 36\nactions:\n  c => setColor('mediumpurple')\n  d => setColor('violet')`,\n\n`// poetasters shrub\naxiom: F\nrules: \n F => Fe[+cFF]Fd[-FF]cF\n\ncolor:brown\ndirection: [0, 1, 0]\nangle: 322\ndepth: 4\nactions:\n  c => setColor('green')\n  d => setColor('lightgreen')\n  e => setColor('brown')`,\n\n`// poetasters weed, after, P. Bourke\naxiom: F\nrules:\n  F -> F-[XY]+[XY]F+[XY]-[XY]\n  X -> +dFY\n  Y -> -cFX\n\ncolor: brown\ndirection: [0, 1, 0.5]\nangle: 22.5\ndepth:5\nactions:\n  c => setColor('green')\n  d => setColor('lime')`,\n\n`// Unlikely bush (after Bourke)\naxiom: F\nrules: \n  F => eF[+cFF][-FF]cF[-F]d[+F]F\n\ncolor: brown\ndirection: [0, 1, 0]\nangle: 330\ndepth:3\nactions:\n  c => setColor('green')\n  d => setColor('lime')\n  e => setColor('brown')`,\n\n`// Weed, P. Bourke\naxiom: F\nrules:\n  F -> FF-[XY]+[XY]\n  X -> +cFY\n  Y -> -dFX\n\ncolor: brown\ndirection: [0, 1, 1]\nangle: 22.5\nactions:\n  c => setColor('green')\n  d => setColor('lime')`,\n\n`// P. Bourke after Saupe\naxiom: VZFFF\nrules:\n  V -> [+++W][---W]YV\n  W -> +X[-W]Z\n  X -> -W[+X]Z\n  Y -> YZ\n  Z -> [-FcFF][+FdFF]F\n\ncolor: green\ndepth:8\ndirection: [0, 1, 0]\nangle: 20\nactions:\n  c => setColor('lightgreen')\n  d => setColor('lime')`,\n\n`// poetaster's curly, inspired by  McWorter\naxiom: F+F-F+F\nrules: \n  F => eF-F-F++[cF+F-dF[GGG]][GGG]\n  G => c--g--g--g--g--g--g--g\n\ndepth: 3\nangle: 17\nwidth:2\ndirection: [-0.5,0.7,-0.5]\nactions:\n  c => setColor(\"palegreen\")\n  d => setColor(\"violet\") \n  e => setColor(\"green\")\n  g => draw(2)`,\n\n`// aquatic plant\naxiom: F\nrules:\n  F -> FFc[-F++F]d[+F--F]e++F--F\n\ncolor: brown\ndirection: [0, 1, 0.5]\nangle: 27\ndepth:4\nactions:\n  c => setColor('green')\n  d => setColor('lime')\n  e => setColor('goldenrod')`,\n\n`// another aquatic \naxiom: F\nrules:\n  F => FMNOMBxPNMyO\n  M => e[-F++F++]\n  N => d[+F--F--]\n  O => c++F--F\n  P => d--F++F\n\ncolor: brown\ndirection: [0, 1, -1]\nangle: 27\ndepth:5\nactions:\n  c => setColor('green')\n  d => setColor('lime')\n  e => setColor('goldenrod')\n  x => rotateX(2)\n  y => rotateY(-3)`,\n\n`// poetasters third aquatic\naxiom: F\nrules:\n  F -> FMNxQRyQR[O-O-O-O-0]\n  M => d[++FF+FF+]\n  N => d[--FF-FF-]\n  O => e[F-F-F++dF+F-F]\n  Q => c++F--F\n  R => c--F++F\n\ncolor: brown\ndirection: [0, 1, -1]\nangle: 17\ndepth:4\nactions:\n  c => setColor('green')\n  d => setColor('lime')\n  e => setColor('goldenrod')\n  x => rotateX(2)\n  y => rotateY(-1.5)`,\n\n`// poetasters sallow thorn\naxiom: F\nrules:\n  F -> FMNxQRyQROP\n  M => d[++FF+FF+]\n  N => d[--FF-FF-]\n  O => e[-F++F++]\n  P => e[+F--F--]\n  Q => c++F--F\n  R => c--F++F\n\ncolor: brown\ndirection: [0.5, 1, -1]\nangle: 27\ndepth:5\nactions:\n  c => setColor('green')\n  d => setColor('lime')\n  e => setColor('goldenrod')\n  x => rotateX(2)\n  y => rotateY(-1.5)`,\n\n`// Pean-c flower after Gary Teachout\naxiom: FXhFXiFX\nrules:\n F => \n X =>  [FX-FY][-cFX-FY-FX][ZZ]-dFY-FX+FY+FX\n Y => FY\n Z => -cFX-FY-FX\n\ncolor: green\ndepth: 3\nangle: 340\nwidth: 2\ndirection: [1,1,1]\nactions:\n  c => setColor(\"violet\")\n  d => setColor(\"lime\")\n  h => rotate(5)\n  i => rotate(-3)`,\n\n`// poetasters succulent 1\naxiom: A\nrules:\n A =>[FL]gAhg[FLA]\n F => cSF \n S => dFL\n L => c[F+F+F]fe[F-F-F]\n\ncolor:green\ndirection: [0, 1, 0.5]\nwidth: 4\nangle: 17\ndepth: 7\nactions:\n  c => setColor('green')\n  d => setColor('lime')\n  e => setColor('lightgreen')\n  g => rotate(4.5)\n  h => rotate(-3)`,\n\n`// Pyramids, Anthony Hanmer ADH258a \naxiom: F++F++F+++F--F--F\nrules: \n  F =>  cFF++F++F++dFFF\n\ncolor: gold\nangle: 60\ndepth:3\nactions:\n  c => setColor('gold')\n  d => setColor('goldenrod')`,\n\n`// Hilbert curve\naxiom: X\nrules: \n X => -YF+XFX+FY-\n Y => +XF-YFY-FX+\n\nangle: 90`,\n\n`// Levey Curve\naxiom: F++F++F++F\nrules: \n  F => -dF++cF-\nangle: 45\ndepth: 12\nactions:\n  c => setColor(\"goldenrod\")\n  d => setColor(\"gold\")`,\n\n`// blocks\naxiom: F+F+F+F\nrules: \n F => F-f+FF-FF-FF-FFf-FFFF\n f => ffffff\n\nangle: 90\ndepth: 3 `,\n\n`// aztec blocks\naxiom: F-F-F-F\nrules: \n F => F-cf+FF-F-FF-Ff-FF+df-FF+F+FF+Ff+FFF\n f => ffffff\n\nangle: 90\ndepth: 2\nactions:\n  c => setColor(\"goldenrod\")\n  d => setColor(\"gold\")`,\n\n`// Color Mosaic\naxiom: F+F+F+F\nrules: \n  F => dFF+F+cF+F+FF\n\ncolor: green\ndepth: 3\nangle: 90\nactions:\n  c => setColor('lime')\n  d => setColor('green')`,\n\n`// 3 Blocks\naxiom: F^^F^^F\nrules: \n F => F-fff^F^^F^^F&&fff-FFF\n f => fff\n\ndepth: 3\nactions:\n - => rotate(-90)\n ^ => rotate(60)\n & => rotate(-60) `,\n`// Leaf\naxiom: Y---Y\nrules: \n X => F-FF-F--[--X]F-FF-F--F-FF-F--\n Y => f-F+X+F-fY\n\ndepth: 8\nangle: 60`, `// esum\naxiom: X+X+X+X+X+X+X+X\nrules: \n X => [F[-X++Y]]\n Y => [F[-Y--X]]\n F => F\n\ndepth: 6\nangle: -45`,\n`// Penrose tiling\naxiom: [N]++[N]++[N]++[N]++[N]\nrules: \n  M => OF++PF----NF[-OF----MF]++\n  N => +OF--PF[---MF--NF]+\n  O => -MF++NF[+++OF++PF]-\n  P => --OF++++MF[+PF++++NF]--NF\n  F => \n\ndepth: 4\nangle: 36\n`\n  ]\n\nexport default function getCodeModel(scene) {\n  let model = {\n    setCode,\n    error: null,\n    randomize,\n    code: qs.get('code')\n  }\n  let lastPickedIndex = -1;\n\n  setCode(model.code);\n\n  return model;\n\n  function randomize() {\n    let index;\n    do { index = pickRandomIndex(standardCollection) } while (index === lastPickedIndex);\n    lastPickedIndex = index;\n    let code = standardCollection[lastPickedIndex];\n    setCode(code);\n    model.ignoreNextUpdate = true;\n    model.code = code;\n  }\n\n  function setCode(newCode) {\n    newCode = newCode.trim();\n    if (!newCode) {\n      model.error = 'Enter a system description above'\n      return;\n    }\n    try {\n      let system = parseExpression(newCode);\n      if (system) {\n        // TODO: I messed up with grammar, and seems like string value takes precedence over\n        // axiom clause. A little hack here to put them back on the same page until better fix:\n        if (system.axiom) system.start = system.axiom;\n        scene.setSystem(system);\n        if (scene.isComplete()) {\n          model.error = null;\n        } else {\n          model.error = 'The system limit reached.\\nRendering first 1,000,000 characters'\n        }\n        qs.set('code', newCode);\n      } else {\n        model.error = 'Could not parse the input string';\n      }\n    } catch (e) {\n      model.error = e.message;\n    }\n  }\n}\n\nfunction getInitialCode() {\n  // todo: query state?\n  return `axiom: X\nrules: \n  X => -YF+XFX+FY-\n  Y => +XF-YFY-FX+\n\ndepth: 5\nstepsPerFrame: 10\nwidth: 2\ncolor: #FFFFFF\n\nactions:\n  - => rotate(-90)\n  + => rotate(90)\n  F => draw()\n`\n}\n\n\nfunction getRandomSystem(length) {\n  let states = 'FXY';\n  let res = [];\n  let lastCh = '';\n  while (res.length < length) {\n    let ch = pickChar();\n    if (ch === '+' && lastCh === '-') ch = '-'\n    else if (ch === '-' && lastCh === '+') ch = '+';\n    else if (ch === 'F' && lastCh === 'F') ch = Math.random() < 0.5 ? 'X': 'Y';\n    res.push(ch);\n    lastCh = ch;\n  }\n\n  for (let ch of 'FXY') {\n    if (res.indexOf(ch) < 0) {\n      res[Math.floor(Math.random() * res.length)] = ch;\n    }\n  }\n\n  let X = res.join('');\n  let Y = res.reverse().map( x => {\n    if (x === '+') return '-';\n    if (x === '-') return '+';\n    if (x === 'Y') return 'X';\n    if (x === 'X') return 'Y';\n    return x;\n  } ).join('')\n\n  let angle = Math.random() < 0.5 ? 60 : 90;\n  if (angle === 90 && ( X.match(/(\\+\\+|\\+-|--)/) || Y.match(/(\\+\\+|\\+-|--)/))) angle = 45;\n  return {X, Y, angle}\n\n  function pickChar() {\n    let r = Math.random();\n    if (r < 0.78) {\n      r = Math.random();\n      return states[Math.floor(states.length * r)]\n    } else {\n      return r < 0.89 ? '+' : '-'\n    }\n  }\n}\n\nfunction pickRandomIndex(arr) {\n  return Math.floor(Math.random() * arr.length);\n}\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('codemirror',{ref:\"editor\",attrs:{\"options\":{\n    viewportMargin: Infinity,\n    theme: 'lsystem',\n    mode: 'application/lsystem',\n  }},model:{value:(_vm.model.code),callback:function ($$v) {_vm.$set(_vm.model, \"code\", $$v)},expression:\"model.code\"}}),(_vm.model.error)?_c('div',{staticClass:\"error-container\"},[_c('pre',{staticClass:\"error hl\"},[_vm._v(_vm._s(_vm.model.error))])]):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import eventify from 'ngraph.events';\nconst bus = eventify({});\nexport default bus;","<template>\n<div>\n  <codemirror v-model='model.code' ref='editor' :options=\"{\n    viewportMargin: Infinity,\n    theme: 'lsystem',\n    mode: 'application/lsystem',\n  }\"></codemirror>\n  <div class='error-container' v-if='model.error'>\n    <pre class='error hl'>{{model.error}}</pre>\n  </div> \n</div>\n</template>\n\n<script>\nimport bus from './bus';\nimport { codemirror } from 'vue-codemirror-lite';\nvar CodeMirror = require('codemirror/lib/codemirror.js')\nrequire('codemirror/addon/comment/comment.js');\nrequire('./lmode.js')(CodeMirror)\n\nfunction toggleComment(cm) {\n  cm.toggleComment({\n    indent: true,\n    lineComment: '//'\n  });\n}\n\nfunction handleUp(cm) {\n  return updateValueIfNeededBy(1, cm);\n}\n\nfunction handleDown(cm) {\n  return updateValueIfNeededBy(-1, cm);\n}\n\nfunction updateValueIfNeededBy(delta, cm) {\n  let cursor = cm.getCursor();\n  let token = cm.getTokenAt(cursor);\n  if (!token || token.type !== 'number') return CodeMirror.Pass;\n\n  let from = {line: cursor.line, ch: token.start};\n  let end = {line: cursor.line, ch: token.end};\n\n  let v = Number.parseFloat(token.string);\n  let line = cm.getLine(cursor.line);\n  if (from.ch > 0) {\n    // minus is not part of the number.\n    if (line[from.ch - 1] === '-') {\n      v *= -1;\n      from.ch -= 1;\n    }\n  }\n\n  \n  v += delta;\n  var doc = cm.getDoc();\n  doc.replaceRange(String(v), from, end);\n  bus.fire('immediate-update')\n}\n//require('./glslmode')(CodeMirror);\nexport default {\n  name: 'CodeEditor',\n  props: ['model'],\n  components: {\n    codemirror\n  },\n\n  mounted() {\n    bus.on('settings-collapsed', refreshEditor, this);\n    bus.on('immediate-update', this.setImmediateUpdate, this);\n    this.$refs.editor.editor.setOption('extraKeys', {\n      'Cmd-/': toggleComment,\n      'Ctrl-/': toggleComment,\n      'Shift-Up': handleUp,\n      'Shift-Down': handleDown\n    });\n  },\n\n  beforeDestroy() {\n    bus.off('settings-collapsed', refreshEditor, this);\n    bus.off('immediate-update', this.setImmediateUpdate, this);\n  },\n  watch: {\n    'model.code': function() {\n      if (this.model.ignoreNextUpdate) {\n        this.model.ignoreNextUpdate = false;\n        return;\n      }\n      if (this.pendingSetCode) {\n        clearTimeout(this.pendingSetCode);\n      }\n      if (this.isImmediate) {\n        this.model.setCode(this.model.code);\n        this.pendingSetCode = 0;\n        return;\n      } \n\n      // We don't want to update code on each key stroke. This would have negative\n      // impact on performance.\n      this.pendingSetCode = setTimeout(() => {\n        this.model.setCode(this.model.code);\n        this.pendingSetCode = 0;\n      }, 300);\n    },\n  },\n  data() {\n    return {\n      clearImmediate: 0,\n      isImmediate: false\n    }\n  },\n  methods: {\n    setImmediateUpdate() {\n      if (this.clearImmediate) clearTimeout(this.clearImmediate);\n      this.clearImmediate = setTimeout(() => this.isImmediate = false, 30);\n      this.isImmediate = true;\n    }\n  }\n}\nfunction refreshEditor(isCollapsed) {\n  // Code mirror sometimes is not visible https://stackoverflow.com/questions/8349571/codemirror-editor-is-not-loading-content-until-clicked\n  if (!isCollapsed) {\n    setTimeout(() => {\n      this.$refs.editor.editor.refresh()\n    }, 10);\n  }\n}\n</script>","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodeEditor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodeEditor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CodeEditor.vue?vue&type=template&id=e819de66&\"\nimport script from \"./CodeEditor.vue?vue&type=script&lang=js&\"\nexport * from \"./CodeEditor.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div id=\"app\">\n    <div class='sidebar'>\n      <div class='controls'>\n        <a href=\"#\" class='print-button' @click.prevent='toggleEdit'>{{ showEdit ? \"Hide editor\" : \"Edit...\"}}</a>\n        <a href=\"#\" class='try-another' @click.prevent='randomize'>Randomize</a>\n      </div>\n      <div v-if='showEdit' class='editor-container'>\n        <div class=\"section\">\n        <div class='title'>L-System details: <a class='reset-all' :class='{\"syntax-visible\": syntaxHelpVisible}' href='#' @click.prevent='syntaxHelpVisible = !syntaxHelpVisible' title='click to learn more about syntax'>syntax help</a></div>\n        <div class='help' v-if='syntaxHelpVisible'>\n          L-Systems are described very well on <a href='http://paulbourke.net/fractals/lsys/' target=\"_blank\">Paul Bourke's website</a>.\n          <p>The following is the list of available sections:\n            <ul>\n              <li><strong>axiom</strong>: initial state of the system</li>\n              <li><strong>rules</strong>: list of rewrite rules that are applied on each iteration</li>\n              <li><strong>depth</strong>: how deep we are allowed to go recursively</li>\n              <li><strong>angle</strong>: if specified, this argument governs rotation angle. Can be overridden with <strong>actions</strong></li>\n              <li><strong>actions</strong>: list of graphic commands that are triggered by a matching character in the evolved system.\n                The following is the list of available actions:\n                <ul>\n                  <li><strong>draw(x)</strong> draw <code>x</code> units in current direction</li>\n                  <li><strong>move(x)</strong> move <code>x</code> units in current direction without drawing</li>\n                  <li><strong>rotate(deg)</strong>  rotate current direction <code>deg</code> degrees around Z axis</li>\n                  <li><strong>rotateX(deg)</strong> rotate current direction <code>deg</code> degrees around X axis</li>\n                  <li><strong>rotateY(deg)</strong> rotate current direction <code>deg</code> degrees around Y axis</li>\n                  <li><strong>push()</strong> saves current render state onto stack</li>\n                  <li><strong>pop()</strong> restores previously saved render state</li>\n                  <li><strong>setColor(color)</strong> set the current color value, '#ffa500' or 'orange'.</li>\n                  <li><strong>swapAngle()</strong> swaps the meaning of `+` and `-`.</li>\n                </ul>\n\n                <p>By default the following actions are added automatically:</p>\n<pre><code>actions:\n  F => draw(10)\n  f => move(10)\n  + => rotate(60)\n  - => rotate(-60)\n  & => swapAngle()\n  [ => push()\n  ] => pop()\n</code></pre>\n\n              </li>\n\n              <li><strong>width</strong>: width in pixels of the drawn line</li>\n              <li><strong>color</strong>: color of the line. Accepts names and hex. E.g. <code>blue</code>, works the same as <code>#0000ff</code></li>\n              <li><strong>stepsPerFrame</strong>: how many steps we are allowed to render per single frame.\n              If set to <code>-1</code> the scene is rendered immediately. This could be dangerous on deep\n              systems, as the entire system traversal may exhaust the browser's resources.\n              </li>\n\n              <li><strong>direction</strong>: three numbers separated by coma <code>x, y, z</code> that set initial direction</li>\n              <li><strong>position</strong>: three numbers separated by coma <code>x, y, z</code> that set initial position</li>\n            </ul>\n          </p>\n        </div>\n        <code-editor v-if='codeEditorModel' :model='codeEditorModel' class='code-editor-container'></code-editor>\n</div>\n        <div class='section border-top'>\n        <p>This website renders any L-Systems defined above. The website was created by <a href='https://twitter.com/anvaka'>@anvaka</a>.</p>\n        <p>You can <a href='#' @click.prevent='toSVGFile' >export to svg</a> current scene</p>\n        <p>You can find the entire source code <a href='https://github.com/anvaka/lsystem'>here</a>. \n        Finally, under condition that you love this website you can <a href='https://www.paypal.com/paypalme2/anvakos/3'>buy me a coffee</a> :)\n        </p>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport createScene from './createScene';\nimport getCodeModel from './getCodeModel';\nimport CodeEditor from './CodeEditor';\n\nexport default {\n  name: 'App',\n  components: {\n    CodeEditor\n  },\n  data() {\n    return {\n      codeEditorModel: null,\n      showEdit: true,\n      syntaxHelpVisible: false\n    }\n  },\n  mounted() {\n    this.scene = createScene(document.querySelector('#scene'));\n    this.codeEditorModel = getCodeModel(this.scene);\n  },\n  beforeDestroy() {\n    this.scene.dispose();\n  },\n  methods: {\n    toSVGFile() { \n      this.scene.saveToSVG('l-system.svg');\n    },\n    toggleEdit() {\n      this.showEdit = !this.showEdit;\n    },\n    randomize() {\n      this.codeEditorModel.randomize();\n    }\n  }\n\n}\n</script>\n\n<style lang='stylus'>\n@import \"./shared.styl\";\n@import \"./editor.styl\";\n\nhighlight-color = #172A4D;\nprimary-text = white;\nhelp-text-color = #267fcd;\nhelp-background = rgb(7, 12, 23);\n\nborder-color = #0d3f71;\n\n#app {\n  overflow: hidden;\n  max-height: 100%;\n  position: absolute;\n  z-index: 1;\n  color: #ffffff;\n  background: window-background;\n  box-shadow: 0 2px 4px rgba(0,0,0,0.2), 0 -1px 0px rgba(0,0,0,0.02);\n}\n\n.section {\n  padding: 8px;\n}\n.section.border-top {\n  border-top: 1px solid border-color;\n}\n.sidebar {\n  width: 500px;\n  overflow: hidden\n  max-height: 100%;\n}\n.editor-container {\n  max-height: calc(100vh - 68px);\n  overflow-y: scroll;\n  a {\n    color: #267fcd;\n    text-decoration: none;\n    border-bottom: 1px dashed #172a4d;\n  }\n}\n.error-container {\n  color: white;\n  background: #ff4500;\n  padding: 0 8px;\n}\n.title {\n  color: primary-text;\n  font-size: 18px;\n  padding-left: 4px;\n  a {\n    float: right;\n    font-size: 12px;\n    font-style: italic;\n    color: help-text-color;\n    height: 30px;\n    margin: -5px 0;\n    padding: 7px;\n    border-bottom: none;\n  }\n  a.syntax-visible {\n    background: help-background;\n    color: white;\n    font-style: normal;\n  }\n}\n\n.help {\n  margin-bottom: 7px;\n  padding: 14px;\n  background: #070c17;\n  color: #0774c3;\n  margin: 0 -8px 7px -8px;\n  a {\n    border-bottom: 1px dashed #172a4d;\n    color: white;\n  }\n  ul {\n    padding: 0\n    list-style-type: none;\n    \n    ul {\n      padding-left: 18px;\n      list-style-type: none;\n    }\n\n    strong {\n      color: white;\n      font-weight: normal;\n    }\n    code {\n      color: #4ec9b0;\n    }\n  }\n}\n.code-editor-container {\n  margin: 8px 0 16px 0;\n}\n\n.controls {\n  height: 48px;\n  display: flex;\n  flex-direction: row;\n  align-items: stretch;\n  justify-content: space-around;\n  border-bottom: 1px solid border-color;\n  a {\n    text-decoration: none;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    color: white;\n    margin: 0;\n    border: 0;\n    &:hover {\n      color: emphasis-background;\n      background: highlight-color;\n    }\n  }\n  a.try-another {\n    flex: 1;\n  }\n  a.print-button {\n    flex: 1;\n    border-right: 1px solid border-color;\n    &:focus {\n      border: 1px dashed highlight-color;\n    }\n  }\n}\n@media (max-width: 500px) {\n  #app {\n    width: 100%;\n    margin: 0;\n  }\n  .sidebar {\n    width: 100%;\n  }\n}\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=7ccb3778&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&id=7ccb3778&prod&lang=stylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _vm._m(0)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"absolute no-webgl\"},[_c('h3',[_vm._v(\"WebGL is not enabled :(\")]),_c('p',[_vm._v(\" To render large amount of data fast, this website uses \"),_c('a',{attrs:{\"href\":\"https://get.webgl.org/\"}},[_vm._v(\"WebGL\")]),_vm._v(\", which seem to be not supported by the device that you are using. \")]),_c('p',[_vm._v(\"Please try a different device to play with this website\")])])\n}]\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./NoWebGL.vue?vue&type=template&id=283309e6&scoped=true&\"\nvar script = {}\nimport style0 from \"./NoWebGL.vue?vue&type=style&index=0&id=283309e6&prod&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"283309e6\",\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nimport App from './App.vue'\nimport NoWebGL from './NoWebGL';\nimport {isWebGLEnabled} from 'w-gl';\n\nVue.config.productionTip = false\n\nlet canRender = isWebGLEnabled(document.querySelector('#canvas'));\n\nnew Vue({\n  render: h => h(canRender ? App : NoWebGL),\n}).$mount('#app')\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&id=7ccb3778&prod&lang=stylus&\"","/* eslint-disable */\n\n// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n// Hacked together to barely support l-system definition\n// by Andrei Kashcha (anvaka@)\n\nmodule.exports = function(CodeMirror) {\n\"use strict\";\n\nCodeMirror.defineMode(\"javascript\", function(config, parserConfig) {\n  var indentUnit = config.indentUnit;\n  var statementIndent = parserConfig.statementIndent;\n  var jsonMode = parserConfig.json;\n  var lSystemMode = parserConfig.lsystem;\n  var isTS = parserConfig.typescript;\n  var wordRE = parserConfig.wordCharacters || /[\\w$\\xa1-\\uffff]/;\n  var ruleCharRE = /[a-zA-Z+_^?~<>|&*%\\][-]/;\n\n  // Tokenizer\n\n  var keywords = function(){\n    function kw(type) {return {type: type, style: \"keyword\"};}\n    var A = kw(\"keyword a\"), B = kw(\"keyword b\"), C = kw(\"keyword c\"), D = kw(\"keyword d\");\n    var operator = kw(\"operator\"), atom = {type: \"atom\", style: \"atom\"};\n\n    return {\n      axiom: kw('axiom'),\n      angle: kw('angle'),\n      start: kw('start'),\n      direction: kw('direction'),\n      position: kw('position'),\n      hideGrid: kw('hideGrid'),\n      rules: kw('rules'),\n      depth: kw('depth'),\n      stepsPerFrame: kw('stepsPerFrame'),\n      actions: kw('actions'),\n      color: kw('color'),\n      width: kw('width'),\n    };\n  }();\n  let nope = {test: () => false}\n\n  var isOperatorChar = nope; \n\n  function readRegexp(stream) {\n    var escaped = false, next, inSet = false;\n    while ((next = stream.next()) != null) {\n      if (!escaped) {\n        if (next == \"/\" && !inSet) return;\n        if (next == \"[\") inSet = true;\n        else if (inSet && next == \"]\") inSet = false;\n      }\n      escaped = !escaped && next == \"\\\\\";\n    }\n  }\n\n  // Used as scratch variables to communicate multiple values without\n  // consing up tons of objects.\n  var type, content;\n  function ret(tp, style, cont) {\n    type = tp; content = cont;\n    return style;\n  }\n  function tokenBase(stream, state) {\n    var ch = stream.next();\n    if (ch == '\"' || ch == \"'\") {\n      state.tokenize = tokenString(ch);\n      return state.tokenize(stream, state);\n    } else if (ch == \".\" && stream.match(/^\\d[\\d_]*(?:[eE][+\\-]?[\\d_]+)?/)) {\n      return ret(\"number\", \"number\");\n    } else if (ch == \".\" && stream.match(\"..\")) {\n      return ret(\"spread\", \"meta\");\n    } else if (/[{}\\(\\),;\\:\\.]/.test(ch)) {\n      return ret(ch);\n    } else if (ch == \"=\" && stream.eat(\">\")) {\n      return ret(\"=>\", \"operator\");\n    } else if (ch == \"0\" && stream.match(/^(?:x[\\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/)) {\n      return ret(\"number\", \"number\");\n    } else if (/\\d/.test(ch)) {\n      stream.match(/^[\\d_]*(?:n|(?:\\.[\\d_]*)?(?:[eE][+\\-]?[\\d_]+)?)?/);\n      return ret(\"number\", \"number\");\n    } else if (ch == \"/\") {\n      if (stream.eat(\"*\")) {\n        state.tokenize = tokenComment;\n        return tokenComment(stream, state);\n      } else if (stream.eat(\"/\")) {\n        stream.skipToEnd();\n        return ret(\"comment\", \"comment\");\n      } else if (expressionAllowed(stream, state, 1)) {\n        readRegexp(stream);\n        stream.match(/^\\b(([gimyus])(?![gimyus]*\\2))+\\b/);\n        return ret(\"regexp\", \"string-2\");\n      } else {\n        stream.eat(\"=\");\n        return ret(\"operator\", \"operator\", stream.current());\n      }\n    } else if (ch == \"`\") {\n      state.tokenize = tokenQuasi;\n      return tokenQuasi(stream, state);\n    } else if (ch == \"#\" && stream.peek() == \"!\") {\n      stream.skipToEnd();\n      return ret(\"meta\", \"meta\");\n    } else if (ch == \"#\" && stream.eatWhile(wordRE)) {\n      return ret(\"variable\", \"property\")\n    } else if (ch == \"<\" && stream.match(\"!--\") || ch == \"-\" && stream.match(\"->\")) {\n      stream.skipToEnd()\n      return ret(\"comment\", \"comment\")\n    } else if (isOperatorChar.test(ch)) {\n      if (ch != \">\" || !state.lexical || state.lexical.type != \">\") {\n        if (stream.eat(\"=\")) {\n          if (ch == \"!\" || ch == \"=\") stream.eat(\"=\")\n        } else if (/[<>*+\\-]/.test(ch)) {\n          stream.eat(ch)\n          if (ch == \">\") stream.eat(ch)\n        }\n      }\n      if (ch == \"?\" && stream.eat(\".\")) return ret(\".\")\n      return ret(\"operator\", \"operator\", stream.current());\n    } else if (wordRE.test(ch)) {\n      stream.eatWhile(wordRE);\n      var word = stream.current()\n      if (state.lastType != \".\") {\n        if (keywords.propertyIsEnumerable(word)) {\n          var kw = keywords[word]\n          return ret(kw.type, kw.style, word)\n        }\n        if (word == \"async\" && stream.match(/^(\\s|\\/\\*.*?\\*\\/)*[\\[\\(\\w]/, false))\n          return ret(\"async\", \"keyword\", word)\n      }\n      return ret(\"variable\", \"variable\", word)\n    } else if (ruleCharRE.test(ch)) {\n      var arrow = stream.string.indexOf(\"=>\", stream.start);\n      if (arrow > -1) {\n        var word = stream.current()\n        return ret(\"def\", \"def\", word)\n      }\n    } \n  }\n\n  function tokenString(quote) {\n    return function(stream, state) {\n      var escaped = false, next;\n      while ((next = stream.next()) != null) {\n        if (next == quote && !escaped) break;\n        escaped = !escaped && next == \"\\\\\";\n      }\n      if (!escaped) state.tokenize = tokenBase;\n      return ret(\"string\", \"string\");\n    };\n  }\n\n  function tokenComment(stream, state) {\n    var maybeEnd = false, ch;\n    while (ch = stream.next()) {\n      if (ch == \"/\" && maybeEnd) {\n        state.tokenize = tokenBase;\n        break;\n      }\n      maybeEnd = (ch == \"*\");\n    }\n    return ret(\"comment\", \"comment\");\n  }\n\n  function tokenQuasi(stream, state) {\n    var escaped = false, next;\n    while ((next = stream.next()) != null) {\n      if (!escaped && (next == \"`\" || next == \"$\" && stream.eat(\"{\"))) {\n        state.tokenize = tokenBase;\n        break;\n      }\n      escaped = !escaped && next == \"\\\\\";\n    }\n    return ret(\"quasi\", \"string-2\", stream.current());\n  }\n\n  var brackets = \"([{}])\";\n  // This is a crude lookahead trick to try and notice that we're\n  // parsing the argument patterns for a fat-arrow function before we\n  // actually hit the arrow token. It only works if the arrow is on\n  // the same line as the arguments and there's no strange noise\n  // (comments) in between. Fallback is to only notice when we hit the\n  // arrow, and not declare the arguments as locals for the arrow\n  // body.\n  function findFatArrow(stream, state) {\n    if (state.fatArrowAt) state.fatArrowAt = null;\n    var arrow = stream.string.indexOf(\"=>\", stream.start);\n    if (arrow < 0) return;\n\n    if (isTS) { // Try to skip TypeScript return type declarations after the arguments\n      var m = /:\\s*(?:\\w+(?:<[^>]*>|\\[\\])?|\\{[^}]*\\})\\s*$/.exec(stream.string.slice(stream.start, arrow))\n      if (m) arrow = m.index\n    }\n\n    var depth = 0, sawSomething = false;\n    for (var pos = arrow - 1; pos >= 0; --pos) {\n      var ch = stream.string.charAt(pos);\n      var bracket = brackets.indexOf(ch);\n      if (bracket >= 0 && bracket < 3) {\n        if (!depth) { ++pos; break; }\n        if (--depth == 0) { if (ch == \"(\") sawSomething = true; break; }\n      } else if (bracket >= 3 && bracket < 6) {\n        ++depth;\n      } else if (wordRE.test(ch)) {\n        sawSomething = true;\n      } else if (/[\"'\\/`]/.test(ch)) {\n        for (;; --pos) {\n          if (pos == 0) return\n          var next = stream.string.charAt(pos - 1)\n          if (next == ch && stream.string.charAt(pos - 2) != \"\\\\\") { pos--; break }\n        }\n      } else if (sawSomething && !depth) {\n        ++pos;\n        break;\n      }\n    }\n    if (sawSomething && !depth) state.fatArrowAt = pos;\n  }\n\n  // Parser\n\n  var atomicTypes = {\"atom\": true, \"number\": true, \"variable\": true, \"string\": true, \"regexp\": true, \"this\": true, \"jsonld-keyword\": true};\n\n  function JSLexical(indented, column, type, align, prev, info) {\n    this.indented = indented;\n    this.column = column;\n    this.type = type;\n    this.prev = prev;\n    this.info = info;\n    if (align != null) this.align = align;\n  }\n\n  function inScope(state, varname) {\n    for (var v = state.localVars; v; v = v.next)\n      if (v.name == varname) return true;\n    for (var cx = state.context; cx; cx = cx.prev) {\n      for (var v = cx.vars; v; v = v.next)\n        if (v.name == varname) return true;\n    }\n  }\n\n  function parseJS(state, style, type, content, stream) {\n    var cc = state.cc;\n    // Communicate our context to the combinators.\n    // (Less wasteful than consing up a hundred closures on every call.)\n    cx.state = state; cx.stream = stream; cx.marked = null, cx.cc = cc; cx.style = style;\n\n    if (!state.lexical.hasOwnProperty(\"align\"))\n      state.lexical.align = true;\n\n    while(true) {\n      var combinator = cc.length ? cc.pop() : jsonMode ? expression : statement;\n      if (combinator(type, content)) {\n        while(cc.length && cc[cc.length - 1].lex)\n          cc.pop()();\n        if (cx.marked) return cx.marked;\n        if (type == \"variable\" && inScope(state, content)) return \"variable-2\";\n        return style;\n      }\n    }\n  }\n\n  // Combinator utils\n\n  var cx = {state: null, column: null, marked: null, cc: null};\n  function pass() {\n    for (var i = arguments.length - 1; i >= 0; i--) cx.cc.push(arguments[i]);\n  }\n  function cont() {\n    pass.apply(null, arguments);\n    return true;\n  }\n  function inList(name, list) {\n    for (var v = list; v; v = v.next) if (v.name == name) return true\n    return false;\n  }\n  function register(varname) {\n    var state = cx.state;\n    cx.marked = \"def\";\n    if (state.context) {\n      if (state.lexical.info == \"var\" && state.context && state.context.block) {\n        // FIXME function decls are also not block scoped\n        var newContext = registerVarScoped(varname, state.context)\n        if (newContext != null) {\n          state.context = newContext\n          return\n        }\n      } else if (!inList(varname, state.localVars)) {\n        state.localVars = new Var(varname, state.localVars)\n        return\n      }\n    }\n    // Fall through means this is global\n    if (parserConfig.globalVars && !inList(varname, state.globalVars))\n      state.globalVars = new Var(varname, state.globalVars)\n  }\n  function registerVarScoped(varname, context) {\n    if (!context) {\n      return null\n    } else if (context.block) {\n      var inner = registerVarScoped(varname, context.prev)\n      if (!inner) return null\n      if (inner == context.prev) return context\n      return new Context(inner, context.vars, true)\n    } else if (inList(varname, context.vars)) {\n      return context\n    } else {\n      return new Context(context.prev, new Var(varname, context.vars), false)\n    }\n  }\n\n  function isModifier(name) {\n    return name == \"public\" || name == \"private\" || name == \"protected\" || name == \"abstract\" || name == \"readonly\"\n  }\n\n  // Combinators\n\n  function Context(prev, vars, block) { this.prev = prev; this.vars = vars; this.block = block }\n  function Var(name, next) { this.name = name; this.next = next }\n\n  var defaultVars = new Var(\"this\", new Var(\"arguments\", null))\n  function pushcontext() {\n    cx.state.context = new Context(cx.state.context, cx.state.localVars, false)\n    cx.state.localVars = defaultVars\n  }\n  function pushblockcontext() {\n    cx.state.context = new Context(cx.state.context, cx.state.localVars, true)\n    cx.state.localVars = null\n  }\n  function popcontext() {\n    cx.state.localVars = cx.state.context.vars\n    cx.state.context = cx.state.context.prev\n  }\n  popcontext.lex = true\n  function pushlex(type, info) {\n    var result = function() {\n      var state = cx.state, indent = state.indented;\n      if (state.lexical.type == \"stat\") indent = state.lexical.indented;\n      else for (var outer = state.lexical; outer && outer.type == \")\" && outer.align; outer = outer.prev)\n        indent = outer.indented;\n      state.lexical = new JSLexical(indent, cx.stream.column(), type, null, state.lexical, info);\n    };\n    result.lex = true;\n    return result;\n  }\n  function poplex() {\n    var state = cx.state;\n    if (state.lexical.prev) {\n      if (state.lexical.type == \")\")\n        state.indented = state.lexical.indented;\n      state.lexical = state.lexical.prev;\n    }\n  }\n  poplex.lex = true;\n\n  function expect(wanted) {\n    function exp(type) {\n      if (type == wanted) return cont();\n      else if (wanted == \";\" || type == \"}\" || type == \")\" || type == \"]\") return pass();\n      else return cont(exp);\n    };\n    return exp;\n  }\n\n  function statement(type, value) {\n    if (type == \"var\") return cont(pushlex(\"vardef\", value), vardef, expect(\";\"), poplex);\n    if (type == \"keyword a\") return cont(pushlex(\"form\"), parenExpr, statement, poplex);\n    if (type == \"keyword b\") return cont(pushlex(\"form\"), statement, poplex);\n    if (type == \"keyword d\") return cx.stream.match(/^\\s*$/, false) ? cont() : cont(pushlex(\"stat\"), maybeexpression, expect(\";\"), poplex);\n    if (type == \"debugger\") return cont(expect(\";\"));\n    if (type == \"{\") return cont(pushlex(\"}\"), pushblockcontext, block, poplex, popcontext);\n    if (type == \";\") return cont();\n    if (type == \"if\") {\n      if (cx.state.lexical.info == \"else\" && cx.state.cc[cx.state.cc.length - 1] == poplex)\n        cx.state.cc.pop()();\n      return cont(pushlex(\"form\"), parenExpr, statement, poplex, maybeelse);\n    }\n    if (type == \"function\") return cont(functiondef);\n    if (type == \"for\") return cont(pushlex(\"form\"), forspec, statement, poplex);\n    if (type == \"class\" || (isTS && value == \"interface\")) {\n      cx.marked = \"keyword\"\n      return cont(pushlex(\"form\", type == \"class\" ? type : value), className, poplex)\n    }\n    if (type == \"variable\") {\n      if (isTS && value == \"declare\") {\n        cx.marked = \"keyword\"\n        return cont(statement)\n      } else if (isTS && (value == \"module\" || value == \"enum\" || value == \"type\") && cx.stream.match(/^\\s*\\w/, false)) {\n        cx.marked = \"keyword\"\n        if (value == \"enum\") return cont(enumdef);\n        else if (value == \"type\") return cont(typename, expect(\"operator\"), typeexpr, expect(\";\"));\n        else return cont(pushlex(\"form\"), pattern, expect(\"{\"), pushlex(\"}\"), block, poplex, poplex)\n      } else if (isTS && value == \"namespace\") {\n        cx.marked = \"keyword\"\n        return cont(pushlex(\"form\"), expression, statement, poplex)\n      } else if (isTS && value == \"abstract\") {\n        cx.marked = \"keyword\"\n        return cont(statement)\n      } else {\n        return cont(pushlex(\"stat\"), maybelabel);\n      }\n    }\n    if (type == \"switch\") return cont(pushlex(\"form\"), parenExpr, expect(\"{\"), pushlex(\"}\", \"switch\"), pushblockcontext,\n                                      block, poplex, poplex, popcontext);\n    if (type == \"case\") return cont(expression, expect(\":\"));\n    if (type == \"default\") return cont(expect(\":\"));\n    if (type == \"catch\") return cont(pushlex(\"form\"), pushcontext, maybeCatchBinding, statement, poplex, popcontext);\n    if (type == \"export\") return cont(pushlex(\"stat\"), afterExport, poplex);\n    if (type == \"import\") return cont(pushlex(\"stat\"), afterImport, poplex);\n    if (type == \"async\") return cont(statement)\n    if (value == \"@\") return cont(expression, statement)\n    return pass(pushlex(\"stat\"), expression, expect(\";\"), poplex);\n  }\n  function maybeCatchBinding(type) {\n    if (type == \"(\") return cont(funarg, expect(\")\"))\n  }\n  function expression(type, value) {\n    return expressionInner(type, value, false);\n  }\n  function expressionNoComma(type, value) {\n    return expressionInner(type, value, true);\n  }\n  function parenExpr(type) {\n    if (type != \"(\") return pass()\n    return cont(pushlex(\")\"), maybeexpression, expect(\")\"), poplex)\n  }\n  function expressionInner(type, value, noComma) {\n    if (cx.state.fatArrowAt == cx.stream.start) {\n      var body = noComma ? arrowBodyNoComma : arrowBody;\n      if (type == \"(\") return cont(pushcontext, pushlex(\")\"), commasep(funarg, \")\"), poplex, expect(\"=>\"), body, popcontext);\n      else if (type == \"variable\") return pass(pushcontext, pattern, expect(\"=>\"), body, popcontext);\n    }\n\n    var maybeop = noComma ? maybeoperatorNoComma : maybeoperatorComma;\n    if (atomicTypes.hasOwnProperty(type)) return cont(maybeop);\n    if (type == \"function\") return cont(functiondef, maybeop);\n    if (type == \"class\" || (isTS && value == \"interface\")) { cx.marked = \"keyword\"; return cont(pushlex(\"form\"), classExpression, poplex); }\n    if (type == \"keyword c\" || type == \"async\") return cont(noComma ? expressionNoComma : expression);\n    if (type == \"(\") return cont(pushlex(\")\"), maybeexpression, expect(\")\"), poplex, maybeop);\n    if (type == \"operator\" || type == \"spread\") return cont(noComma ? expressionNoComma : expression);\n    if (type == \"[\") return cont(pushlex(\"]\"), arrayLiteral, poplex, maybeop);\n    if (type == \"{\") return contCommasep(objprop, \"}\", null, maybeop);\n    if (type == \"quasi\") return pass(quasi, maybeop);\n    if (type == \"new\") return cont(maybeTarget(noComma));\n    if (type == \"import\") return cont(expression);\n    return cont();\n  }\n  function maybeexpression(type) {\n    if (type.match(/[;\\}\\)\\],]/)) return pass();\n    return pass(expression);\n  }\n\n  function maybeoperatorComma(type, value) {\n    if (type == \",\") return cont(maybeexpression);\n    return maybeoperatorNoComma(type, value, false);\n  }\n  function maybeoperatorNoComma(type, value, noComma) {\n    var me = noComma == false ? maybeoperatorComma : maybeoperatorNoComma;\n    var expr = noComma == false ? expression : expressionNoComma;\n    if (type == \"=>\") return cont(pushcontext, noComma ? arrowBodyNoComma : arrowBody, popcontext);\n    if (type == \"operator\") {\n      if (/\\+\\+|--/.test(value) || isTS && value == \"!\") return cont(me);\n      if (isTS && value == \"<\" && cx.stream.match(/^([^<>]|<[^<>]*>)*>\\s*\\(/, false))\n        return cont(pushlex(\">\"), commasep(typeexpr, \">\"), poplex, me);\n      if (value == \"?\") return cont(expression, expect(\":\"), expr);\n      return cont(expr);\n    }\n    if (type == \"quasi\") { return pass(quasi, me); }\n    if (type == \";\") return;\n    if (type == \"(\") return contCommasep(expressionNoComma, \")\", \"call\", me);\n    if (type == \".\") return cont(property, me);\n    if (type == \"[\") return cont(pushlex(\"]\"), maybeexpression, expect(\"]\"), poplex, me);\n    if (isTS && value == \"as\") { cx.marked = \"keyword\"; return cont(typeexpr, me) }\n    if (type == \"regexp\") {\n      cx.state.lastType = cx.marked = \"operator\"\n      cx.stream.backUp(cx.stream.pos - cx.stream.start - 1)\n      return cont(expr)\n    }\n  }\n  function quasi(type, value) {\n    if (type != \"quasi\") return pass();\n    if (value.slice(value.length - 2) != \"${\") return cont(quasi);\n    return cont(expression, continueQuasi);\n  }\n  function continueQuasi(type) {\n    if (type == \"}\") {\n      cx.marked = \"string-2\";\n      cx.state.tokenize = tokenQuasi;\n      return cont(quasi);\n    }\n  }\n  function arrowBody(type) {\n    findFatArrow(cx.stream, cx.state);\n    return pass(type == \"{\" ? statement : expression);\n  }\n  function arrowBodyNoComma(type) {\n    findFatArrow(cx.stream, cx.state);\n    return pass(type == \"{\" ? statement : expressionNoComma);\n  }\n  function maybeTarget(noComma) {\n    return function(type) {\n      if (type == \".\") return cont(noComma ? targetNoComma : target);\n      else if (type == \"variable\" && isTS) return cont(maybeTypeArgs, noComma ? maybeoperatorNoComma : maybeoperatorComma)\n      else return pass(noComma ? expressionNoComma : expression);\n    };\n  }\n  function target(_, value) {\n    if (value == \"target\") { cx.marked = \"keyword\"; return cont(maybeoperatorComma); }\n  }\n  function targetNoComma(_, value) {\n    if (value == \"target\") { cx.marked = \"keyword\"; return cont(maybeoperatorNoComma); }\n  }\n  function maybelabel(type) {\n    if (type == \":\") return cont(poplex, statement);\n    return pass(maybeoperatorComma, expect(\";\"), poplex);\n  }\n  function property(type) {\n    if (type == \"variable\") {cx.marked = \"property\"; return cont();}\n  }\n  function objprop(type, value) {\n    if (type == \"async\") {\n      cx.marked = \"property\";\n      return cont(objprop);\n    } else if (type == \"variable\" || cx.style == \"keyword\") {\n      cx.marked = \"property\";\n      if (value == \"get\" || value == \"set\") return cont(getterSetter);\n      var m // Work around fat-arrow-detection complication for detecting typescript typed arrow params\n      if (isTS && cx.state.fatArrowAt == cx.stream.start && (m = cx.stream.match(/^\\s*:\\s*/, false)))\n        cx.state.fatArrowAt = cx.stream.pos + m[0].length\n      return cont(afterprop);\n    } else if (type == \"number\" || type == \"string\") {\n      cx.marked = (cx.style + \" property\");\n      return cont(afterprop);\n    } else if (type == \"jsonld-keyword\") {\n      return cont(afterprop);\n    } else if (isTS && isModifier(value)) {\n      cx.marked = \"keyword\"\n      return cont(objprop)\n    } else if (type == \"[\") {\n      return cont(expression, maybetype, expect(\"]\"), afterprop);\n    } else if (type == \"spread\") {\n      return cont(expressionNoComma, afterprop);\n    } else if (value == \"*\") {\n      cx.marked = \"keyword\";\n      return cont(objprop);\n    } else if (type == \":\") {\n      return pass(afterprop)\n    }\n  }\n  function getterSetter(type) {\n    if (type != \"variable\") return pass(afterprop);\n    cx.marked = \"property\";\n    return cont(functiondef);\n  }\n  function afterprop(type) {\n    if (type == \":\") return cont(expressionNoComma);\n    if (type == \"(\") return pass(functiondef);\n  }\n  function commasep(what, end, sep) {\n    function proceed(type, value) {\n      if (sep ? sep.indexOf(type) > -1 : type == \",\") {\n        var lex = cx.state.lexical;\n        if (lex.info == \"call\") lex.pos = (lex.pos || 0) + 1;\n        return cont(function(type, value) {\n          if (type == end || value == end) return pass()\n          return pass(what)\n        }, proceed);\n      }\n      if (type == end || value == end) return cont();\n      if (sep && sep.indexOf(\";\") > -1) return pass(what)\n      return cont(expect(end));\n    }\n    return function(type, value) {\n      if (type == end || value == end) return cont();\n      return pass(what, proceed);\n    };\n  }\n  function contCommasep(what, end, info) {\n    for (var i = 3; i < arguments.length; i++)\n      cx.cc.push(arguments[i]);\n    return cont(pushlex(end, info), commasep(what, end), poplex);\n  }\n  function block(type) {\n    if (type == \"}\") return cont();\n    return pass(statement, block);\n  }\n  function maybetype(type, value) {\n    if (isTS) {\n      if (type == \":\") return cont(typeexpr);\n      if (value == \"?\") return cont(maybetype);\n    }\n  }\n  function maybetypeOrIn(type, value) {\n    if (isTS && (type == \":\" || value == \"in\")) return cont(typeexpr)\n  }\n  function mayberettype(type) {\n    if (isTS && type == \":\") {\n      if (cx.stream.match(/^\\s*\\w+\\s+is\\b/, false)) return cont(expression, isKW, typeexpr)\n      else return cont(typeexpr)\n    }\n  }\n  function isKW(_, value) {\n    if (value == \"is\") {\n      cx.marked = \"keyword\"\n      return cont()\n    }\n  }\n  function typeexpr(type, value) {\n    if (value == \"keyof\" || value == \"typeof\" || value == \"infer\") {\n      cx.marked = \"keyword\"\n      return cont(value == \"typeof\" ? expressionNoComma : typeexpr)\n    }\n    if (type == \"variable\" || value == \"void\") {\n      cx.marked = \"type\"\n      return cont(afterType)\n    }\n    if (value == \"|\" || value == \"&\") return cont(typeexpr)\n    if (type == \"string\" || type == \"number\" || type == \"atom\") return cont(afterType);\n    if (type == \"[\") return cont(pushlex(\"]\"), commasep(typeexpr, \"]\", \",\"), poplex, afterType)\n    if (type == \"{\") return cont(pushlex(\"}\"), commasep(typeprop, \"}\", \",;\"), poplex, afterType)\n    if (type == \"(\") return cont(commasep(typearg, \")\"), maybeReturnType, afterType)\n    if (type == \"<\") return cont(commasep(typeexpr, \">\"), typeexpr)\n  }\n  function maybeReturnType(type) {\n    if (type == \"=>\") return cont(typeexpr)\n  }\n  function typeprop(type, value) {\n    if (type == \"variable\" || cx.style == \"keyword\") {\n      cx.marked = \"property\"\n      return cont(typeprop)\n    } else if (value == \"?\" || type == \"number\" || type == \"string\") {\n      return cont(typeprop)\n    } else if (type == \":\") {\n      return cont(typeexpr)\n    } else if (type == \"[\") {\n      return cont(expect(\"variable\"), maybetypeOrIn, expect(\"]\"), typeprop)\n    } else if (type == \"(\") {\n      return pass(functiondecl, typeprop)\n    }\n  }\n  function typearg(type, value) {\n    if (type == \"variable\" && cx.stream.match(/^\\s*[?:]/, false) || value == \"?\") return cont(typearg)\n    if (type == \":\") return cont(typeexpr)\n    if (type == \"spread\") return cont(typearg)\n    return pass(typeexpr)\n  }\n  function afterType(type, value) {\n    if (value == \"<\") return cont(pushlex(\">\"), commasep(typeexpr, \">\"), poplex, afterType)\n    if (value == \"|\" || type == \".\" || value == \"&\") return cont(typeexpr)\n    if (type == \"[\") return cont(typeexpr, expect(\"]\"), afterType)\n    if (value == \"extends\" || value == \"implements\") { cx.marked = \"keyword\"; return cont(typeexpr) }\n    if (value == \"?\") return cont(typeexpr, expect(\":\"), typeexpr)\n  }\n  function maybeTypeArgs(_, value) {\n    if (value == \"<\") return cont(pushlex(\">\"), commasep(typeexpr, \">\"), poplex, afterType)\n  }\n  function typeparam() {\n    return pass(typeexpr, maybeTypeDefault)\n  }\n  function maybeTypeDefault(_, value) {\n    if (value == \"=\") return cont(typeexpr)\n  }\n  function vardef(_, value) {\n    if (value == \"enum\") {cx.marked = \"keyword\"; return cont(enumdef)}\n    return pass(pattern, maybetype, maybeAssign, vardefCont);\n  }\n  function pattern(type, value) {\n    if (isTS && isModifier(value)) { cx.marked = \"keyword\"; return cont(pattern) }\n    if (type == \"variable\") { register(value); return cont(); }\n    if (type == \"spread\") return cont(pattern);\n    if (type == \"[\") return contCommasep(eltpattern, \"]\");\n    if (type == \"{\") return contCommasep(proppattern, \"}\");\n  }\n  function proppattern(type, value) {\n    if (type == \"variable\" && !cx.stream.match(/^\\s*:/, false)) {\n      register(value);\n      return cont(maybeAssign);\n    }\n    if (type == \"variable\") cx.marked = \"property\";\n    if (type == \"spread\") return cont(pattern);\n    if (type == \"}\") return pass();\n    if (type == \"[\") return cont(expression, expect(']'), expect(':'), proppattern);\n    return cont(expect(\":\"), pattern, maybeAssign);\n  }\n  function eltpattern() {\n    return pass(pattern, maybeAssign)\n  }\n  function maybeAssign(_type, value) {\n    if (value == \"=\") return cont(expressionNoComma);\n  }\n  function vardefCont(type) {\n    if (type == \",\") return cont(vardef);\n  }\n  function maybeelse(type, value) {\n    if (type == \"keyword b\" && value == \"else\") return cont(pushlex(\"form\", \"else\"), statement, poplex);\n  }\n  function forspec(type, value) {\n    if (value == \"await\") return cont(forspec);\n    if (type == \"(\") return cont(pushlex(\")\"), forspec1, poplex);\n  }\n  function forspec1(type) {\n    if (type == \"var\") return cont(vardef, forspec2);\n    if (type == \"variable\") return cont(forspec2);\n    return pass(forspec2)\n  }\n  function forspec2(type, value) {\n    if (type == \")\") return cont()\n    if (type == \";\") return cont(forspec2)\n    if (value == \"in\" || value == \"of\") { cx.marked = \"keyword\"; return cont(expression, forspec2) }\n    return pass(expression, forspec2)\n  }\n  function functiondef(type, value) {\n    if (value == \"*\") {cx.marked = \"keyword\"; return cont(functiondef);}\n    if (type == \"variable\") {register(value); return cont(functiondef);}\n    if (type == \"(\") return cont(pushcontext, pushlex(\")\"), commasep(funarg, \")\"), poplex, mayberettype, statement, popcontext);\n    if (isTS && value == \"<\") return cont(pushlex(\">\"), commasep(typeparam, \">\"), poplex, functiondef)\n  }\n  function functiondecl(type, value) {\n    if (value == \"*\") {cx.marked = \"keyword\"; return cont(functiondecl);}\n    if (type == \"variable\") {register(value); return cont(functiondecl);}\n    if (type == \"(\") return cont(pushcontext, pushlex(\")\"), commasep(funarg, \")\"), poplex, mayberettype, popcontext);\n    if (isTS && value == \"<\") return cont(pushlex(\">\"), commasep(typeparam, \">\"), poplex, functiondecl)\n  }\n  function typename(type, value) {\n    if (type == \"keyword\" || type == \"variable\") {\n      cx.marked = \"type\"\n      return cont(typename)\n    } else if (value == \"<\") {\n      return cont(pushlex(\">\"), commasep(typeparam, \">\"), poplex)\n    }\n  }\n  function funarg(type, value) {\n    if (value == \"@\") cont(expression, funarg)\n    if (type == \"spread\") return cont(funarg);\n    if (isTS && isModifier(value)) { cx.marked = \"keyword\"; return cont(funarg); }\n    if (isTS && type == \"this\") return cont(maybetype, maybeAssign)\n    return pass(pattern, maybetype, maybeAssign);\n  }\n  function classExpression(type, value) {\n    // Class expressions may have an optional name.\n    if (type == \"variable\") return className(type, value);\n    return classNameAfter(type, value);\n  }\n  function className(type, value) {\n    if (type == \"variable\") {register(value); return cont(classNameAfter);}\n  }\n  function classNameAfter(type, value) {\n    if (value == \"<\") return cont(pushlex(\">\"), commasep(typeparam, \">\"), poplex, classNameAfter)\n    if (value == \"extends\" || value == \"implements\" || (isTS && type == \",\")) {\n      if (value == \"implements\") cx.marked = \"keyword\";\n      return cont(isTS ? typeexpr : expression, classNameAfter);\n    }\n    if (type == \"{\") return cont(pushlex(\"}\"), classBody, poplex);\n  }\n  function classBody(type, value) {\n    if (type == \"async\" ||\n        (type == \"variable\" &&\n         (value == \"static\" || value == \"get\" || value == \"set\" || (isTS && isModifier(value))) &&\n         cx.stream.match(/^\\s+[\\w$\\xa1-\\uffff]/, false))) {\n      cx.marked = \"keyword\";\n      return cont(classBody);\n    }\n    if (type == \"variable\" || cx.style == \"keyword\") {\n      cx.marked = \"property\";\n      return cont(classfield, classBody);\n    }\n    if (type == \"number\" || type == \"string\") return cont(classfield, classBody);\n    if (type == \"[\")\n      return cont(expression, maybetype, expect(\"]\"), classfield, classBody)\n    if (value == \"*\") {\n      cx.marked = \"keyword\";\n      return cont(classBody);\n    }\n    if (isTS && type == \"(\") return pass(functiondecl, classBody)\n    if (type == \";\" || type == \",\") return cont(classBody);\n    if (type == \"}\") return cont();\n    if (value == \"@\") return cont(expression, classBody)\n  }\n  function classfield(type, value) {\n    if (value == \"?\") return cont(classfield)\n    if (type == \":\") return cont(typeexpr, maybeAssign)\n    if (value == \"=\") return cont(expressionNoComma)\n    var context = cx.state.lexical.prev, isInterface = context && context.info == \"interface\"\n    return pass(isInterface ? functiondecl : functiondef)\n  }\n  function afterExport(type, value) {\n    if (value == \"*\") { cx.marked = \"keyword\"; return cont(maybeFrom, expect(\";\")); }\n    if (value == \"default\") { cx.marked = \"keyword\"; return cont(expression, expect(\";\")); }\n    if (type == \"{\") return cont(commasep(exportField, \"}\"), maybeFrom, expect(\";\"));\n    return pass(statement);\n  }\n  function exportField(type, value) {\n    if (value == \"as\") { cx.marked = \"keyword\"; return cont(expect(\"variable\")); }\n    if (type == \"variable\") return pass(expressionNoComma, exportField);\n  }\n  function afterImport(type) {\n    if (type == \"string\") return cont();\n    if (type == \"(\") return pass(expression);\n    return pass(importSpec, maybeMoreImports, maybeFrom);\n  }\n  function importSpec(type, value) {\n    if (type == \"{\") return contCommasep(importSpec, \"}\");\n    if (type == \"variable\") register(value);\n    if (value == \"*\") cx.marked = \"keyword\";\n    return cont(maybeAs);\n  }\n  function maybeMoreImports(type) {\n    if (type == \",\") return cont(importSpec, maybeMoreImports)\n  }\n  function maybeAs(_type, value) {\n    if (value == \"as\") { cx.marked = \"keyword\"; return cont(importSpec); }\n  }\n  function maybeFrom(_type, value) {\n    if (value == \"from\") { cx.marked = \"keyword\"; return cont(expression); }\n  }\n  function arrayLiteral(type) {\n    if (type == \"]\") return cont();\n    return pass(commasep(expressionNoComma, \"]\"));\n  }\n  function enumdef() {\n    return pass(pushlex(\"form\"), pattern, expect(\"{\"), pushlex(\"}\"), commasep(enummember, \"}\"), poplex, poplex)\n  }\n  function enummember() {\n    return pass(pattern, maybeAssign);\n  }\n\n  function isContinuedStatement(state, textAfter) {\n    return state.lastType == \"operator\" || state.lastType == \",\" ||\n      isOperatorChar.test(textAfter.charAt(0)) ||\n      /[,.]/.test(textAfter.charAt(0));\n  }\n\n  function expressionAllowed(stream, state, backUp) {\n    return state.tokenize == tokenBase &&\n      /^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\\[{}\\(,;:]|=>)$/.test(state.lastType) ||\n      (state.lastType == \"quasi\" && /\\{\\s*$/.test(stream.string.slice(0, stream.pos - (backUp || 0))))\n  }\n\n  // Interface\n\n  return {\n    startState: function(basecolumn) {\n      var state = {\n        tokenize: tokenBase,\n        lastType: \"sof\",\n        cc: [],\n        lexical: new JSLexical((basecolumn || 0) - indentUnit, 0, \"block\", false),\n        localVars: parserConfig.localVars,\n        context: parserConfig.localVars && new Context(null, null, false),\n        indented: basecolumn || 0\n      };\n      if (parserConfig.globalVars && typeof parserConfig.globalVars == \"object\")\n        state.globalVars = parserConfig.globalVars;\n      return state;\n    },\n\n    token: function(stream, state) {\n      if (stream.sol()) {\n        if (!state.lexical.hasOwnProperty(\"align\"))\n          state.lexical.align = false;\n        state.indented = stream.indentation();\n        findFatArrow(stream, state);\n      }\n      if (state.tokenize != tokenComment && stream.eatSpace()) return null;\n      var style = state.tokenize(stream, state);\n      if (type == \"comment\") return style;\n      state.lastType = type == \"operator\" && (content == \"++\" || content == \"--\") ? \"incdec\" : type;\n      return parseJS(state, style, type, content, stream);\n    },\n\n    indent: function(state, textAfter) {\n      if (state.tokenize == tokenComment) return CodeMirror.Pass;\n      if (state.tokenize != tokenBase) return 0;\n      var firstChar = textAfter && textAfter.charAt(0), lexical = state.lexical, top\n      // Kludge to prevent 'maybelse' from blocking lexical scope pops\n      if (!/^\\s*else\\b/.test(textAfter)) for (var i = state.cc.length - 1; i >= 0; --i) {\n        var c = state.cc[i];\n        if (c == poplex) lexical = lexical.prev;\n        else if (c != maybeelse) break;\n      }\n      while ((lexical.type == \"stat\" || lexical.type == \"form\") &&\n             (firstChar == \"}\" || ((top = state.cc[state.cc.length - 1]) &&\n                                   (top == maybeoperatorComma || top == maybeoperatorNoComma) &&\n                                   !/^[,\\.=+\\-*:?[\\(]/.test(textAfter))))\n        lexical = lexical.prev;\n      if (statementIndent && lexical.type == \")\" && lexical.prev.type == \"stat\")\n        lexical = lexical.prev;\n      var type = lexical.type, closing = firstChar == type;\n\n      if (type == \"vardef\") return lexical.indented + (state.lastType == \"operator\" || state.lastType == \",\" ? lexical.info.length + 1 : 0);\n      else if (type == \"form\" && firstChar == \"{\") return lexical.indented;\n      else if (type == \"form\") return lexical.indented + indentUnit;\n      else if (type == \"stat\")\n        return lexical.indented + (isContinuedStatement(state, textAfter) ? statementIndent || indentUnit : 0);\n      else if (lexical.info == \"switch\" && !closing && parserConfig.doubleIndentSwitch != false)\n        return lexical.indented + (/^(?:case|default)\\b/.test(textAfter) ? indentUnit : 2 * indentUnit);\n      else if (lexical.align) return lexical.column + (closing ? 0 : 1);\n      else return lexical.indented + (closing ? 0 : indentUnit);\n    },\n\n    electricInput: /^\\s*(?:case .*?:|default:|\\{|\\})$/,\n    blockCommentStart: jsonMode ? null : \"/*\",\n    blockCommentEnd: jsonMode ? null : \"*/\",\n    blockCommentContinue: jsonMode ? null : \" * \",\n    lineComment: jsonMode ? null : \"//\",\n    fold: \"brace\",\n    closeBrackets: \"()[]{}''\\\"\\\"``\",\n\n    helperType: jsonMode ? \"json\" : \"javascript\",\n    jsonldMode: false,\n    jsonMode: jsonMode,\n\n    expressionAllowed: expressionAllowed,\n\n    skipExpression: function(state) {\n      var top = state.cc[state.cc.length - 1]\n      if (top == expression || top == expressionNoComma) state.cc.pop()\n    }\n  };\n});\n\nCodeMirror.registerHelper(\"wordChars\", \"javascript\", /[\\w$]/);\n\nCodeMirror.defineMIME(\"text/javascript\", \"javascript\");\nCodeMirror.defineMIME(\"text/ecmascript\", \"javascript\");\nCodeMirror.defineMIME(\"application/javascript\", \"javascript\");\nCodeMirror.defineMIME(\"application/x-javascript\", \"javascript\");\nCodeMirror.defineMIME(\"application/ecmascript\", \"javascript\");\nCodeMirror.defineMIME(\"application/json\", {name: \"javascript\", json: true});\nCodeMirror.defineMIME(\"application/lsystem\", {name: \"javascript\", json: true, lsystem: true});\nCodeMirror.defineMIME(\"application/x-json\", {name: \"javascript\", json: true});\nCodeMirror.defineMIME(\"application/ld+json\", {name: \"javascript\", jsonld: true});\nCodeMirror.defineMIME(\"text/typescript\", { name: \"javascript\", typescript: true });\nCodeMirror.defineMIME(\"application/typescript\", { name: \"javascript\", typescript: true });\n}"],"sourceRoot":""}